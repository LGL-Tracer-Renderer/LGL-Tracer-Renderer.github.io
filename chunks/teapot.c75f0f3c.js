import{m as C,l as w,O as M,R as b,b as S,u as L,e as D,g as E}from"./utils.684b27f5.js";import{A as P,S as v,P as T,F,C as y}from"./vendor.b603f603.js";import{C as I,W as R}from"./lglTracer.es.v1.0.8.0820c289.js";const j=[],A=D.Dirlight,G=E.TeapotDraco,e=new I;e.bounces=5;e.renderWhenOffFocus=!0;e.toneMapping=P;e.envMapIntensity=1;e.enableDenoise=!1;e.enableTemporalDenoise=!1;e.enableSpatialDenoise=!0;e.useTileRender=!0;e.movingDownsampling=!0;e.tileSlicesNum=4;document.body.appendChild(e.domElement);const s=document.querySelector("#container");function W(n){n?s.classList.contains("isLoading")||s.classList.add("isLoading"):s.classList.contains("isLoading")&&s.classList.remove("isLoading")}const c=!0,{initStats:k,initGUI:x,initCameraDebugInfo:z}=C();e.loadingCallback={onProgress:n=>console.log(n),onComplete:n=>{console.log(n),W(!1),O(),x(c,e)}};const r=k(c),m=z(c);let g=null,l=null;function O(){e.setDenoiseColorFactor(1),e.setDenoisePositionFactor(.15)}const i=new v;w(j,i);const o=new T(45,window.innerWidth/window.innerHeight,.001,1e3),d=new M(o,e.domElement);d.screenSpacePanning=!0;function q(n){const t=new R;t.transmission=1,t.extinction=new y(.015,.5,.4),t.atDistance=.05,t.roughness=.02,n.traverse(a=>{a.isMesh&&a.material&&a.material.isMeshStandardMaterial&&(a.material=t)})}async function B(){{const a=new b().setDataType(F),u=await new Promise(h=>{a.load(A,h)});i.environment=u}const t=(await S(G)).scene;q(t),i.add(t),t.rotation.y=-Math.PI/2,L(o,d,i),e.buildScene(i,o).then(()=>{p()})}function f(){if(e.domElement.parentElement){const n=e.domElement.parentElement.clientWidth,t=e.domElement.parentElement.clientHeight;e.setSize(n,t),o.aspect=n/t,o.updateProjectionMatrix()}}window.addEventListener("resize",f);f();function p(n){d.update(),r&&r.begin(),e.render(i,o),r&&r.end(),m&&m.dataBegin&&(l=e.getTotalSamples(),g!=l&&(m.innerText=`Samples: ${l}`,g=l)),requestAnimationFrame(p)}B();

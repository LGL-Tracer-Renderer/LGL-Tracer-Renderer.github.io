import{r as t,v as ce,V as B,x as it,o,c as r,b as e,_ as N,B as F,p as Z,e as Q,a as R,d as b,w as L,J as ne,G as D,H as rt,C as me,s as ve,y as fe,q as x,W as V,X as O,F as W,z as j,Y as te,D as q,A as G,K,n as xe,Z as X,t as ct,$ as dt,h as ut,f as pt,a0 as _t,a1 as mt,E as vt,g as ft}from"./el-tag-2a796b49.js";import{x as gt,g as ie,h as E,l as ht,r as ge,k as bt,F as de,m as Ue,n as Ae,p as Pe,q as ze,C as ye,B as Fe,S as Be,H as Ne,s as yt,t as wt,L as Et,aa as xt,w as Ct,y as $t,a as Lt,z as kt,A as Dt,D as Tt,G as Rt,I as Mt,J as St,K as It,N as Vt,O as Ot,P as Ut,R as At,U as Pt,W as Ft,X as Bt,Y as Nt,E as Gt,Z as Kt,_ as jt,$ as zt,a0 as Ht,a1 as Wt,a2 as qt,a3 as Jt,a4 as Xt,a5 as Yt,a6 as Zt,ab as He,a8 as we,a9 as Qt}from"./localforage-bf96fc6c.js";const eo={id:"scene"},to={__name:"index",setup(u){const s=t("");function c(){s.value.appendChild(editor.canvas)}return ce(()=>{}),B(()=>{Editor.on(Editor.events.EDITOR_LOADED,c)}),it(()=>{Editor.off(Editor.events.EDITOR_LOADED,c)}),(d,m)=>(o(),r("div",eo,[e("div",{class:"viewport",ref_key:"viewport",ref:s},null,512)]))}};const Ce=u=>(Z("data-v-14cee3ac"),u=u(),Q(),u),oo=Ce(()=>e("div",{class:"tips-text"},[e("p",null,"Directly drop the gltf/glb (folder or zip) or .hdr to here")],-1)),no=Ce(()=>e("div",{class:"tips-icon"},null,-1)),ao=Ce(()=>e("div",{class:"tips-text-bottom"},[e("p",null,"(Click to close this import modal)")],-1)),so=[oo,no,ao],lo={__name:"index",setup(u){const s=t(!1);function c(){const d=editor.tracer.canvas;d.addEventListener("dragenter",()=>{window.isLibraryDrag||(s.value=!0)}),d.addEventListener("dragleave",()=>{window.isLibraryDrag||(s.value=!1)}),new gt(d,d).on("drop",({files:y})=>{if(window.isLibraryDrag)return;s.value=!1,Array.from(y).find(([n,l])=>l.name.match(/\.(gltf|glb)$/))?editor.sceneListener.importGLTFModel(y):ie({message:"Please drag in the Folder/Zip containing gltf/glb",center:!0,type:"error",showClose:!0,duration:5e3})})}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,c)}),(d,m)=>(o(),r("div",{class:F(["dropTipsArea",{isDroping:s.value}])},[e("div",{class:F(["tips-area",{isDroping:s.value}])},so,2)],2))}},io=N(lo,[["__scopeId","data-v-14cee3ac"]]);const We=u=>(Z("data-v-e407a208"),u=u(),Q(),u),ro=We(()=>e("span",{class:"top-menu-title"},"Import",-1)),co=We(()=>e("span",{class:"import-tips-text"},"You can directly drag the gltf/glb folder or zip to the page without clicking import button :D",-1)),uo={__name:"index",setup(u){const s=t(!0),c=t(),d=t(!1);function m(){s.value=!s.value}function y(){d.value=!0}function w(){c.value.accept=".fbx, .obj, .stl",c.value.click()}function g(){c.value.accept=".hdr, .exr",c.value.click()}function n(){}return ce(()=>{c.value.addEventListener("change",l=>{const i=l.target.files[0];i.name&&editor.sceneListener.importTypeFile(i)})}),B(()=>{Editor.on(Editor.events.EDITOR_LOADED,n)}),(l,i)=>{const a=R("el-menu-item"),_=R("el-sub-menu"),p=R("el-menu"),v=R("el-dialog");return o(),r("div",{class:F(["top-left-menu-container",{"is-open":s.value}])},[b(p,{mode:"horizontal",class:"menu-content",ellipsis:!1},{default:L(()=>[b(_,{index:"1"},{title:L(()=>[ro]),default:L(()=>[b(a,{index:"1-1",onClick:y},{default:L(()=>[ne("GLTF/GLB")]),_:1}),b(a,{index:"1-2",onClick:w},{default:L(()=>[ne("FBX/OBJ/STL")]),_:1}),b(a,{index:"1-3",onClick:g},{default:L(()=>[ne("HDR/EXR")]),_:1})]),_:1})]),_:1}),e("div",{class:"menu-toggle",onClick:m}),e("input",{ref_key:"importInput",ref:c,style:{display:"none"},type:"file",class:"importInput"},null,512),b(v,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=C=>d.value=C),width:400,title:"Tips",center:""},{default:L(()=>[co]),_:1},8,["modelValue"])],2)}}},po=N(uo,[["__scopeId","data-v-e407a208"]]);const qe=u=>(Z("data-v-1f1e9af4"),u=u(),Q(),u),_o={class:"menu-content"},mo={class:"sample-count"},vo=qe(()=>e("span",{class:"item-text pre-text"},"Samples:",-1)),fo={class:"item-text cur-sample-text"},go=qe(()=>e("span",{class:"item-text split-text"},"/",-1)),ho={class:"item-text target-sample-text"},bo={__name:"index",setup(u){const s=t(),c=t(!0),d=t(0),m=t(0);function y(){c.value=!c.value}function w(){var i,a;(a=(i=s.value)==null?void 0:i.blur)==null||a.call(i)}function g(){m.value=editor.tracer.targetSampleCount,d.value=editor.tracer.sampleCount}function n(){d.value=editor.tracer.sampleCount}const l=i=>{editor.tracer.targetSampleCount=i};return B(()=>{Editor.on(Editor.events.RENDER_DRAWCALL,n),Editor.on(Editor.events.EDITOR_LOADED,g)}),(i,a)=>{const _=R("el-input");return o(),r("div",{class:F(["top-right-menu-container",{"is-open":c.value}])},[e("div",{class:"menu-toggle",onClick:a[0]||(a[0]=p=>y())}),e("ul",_o,[e("li",mo,[vo,e("span",fo,D(d.value),1),go,e("span",ho,[b(_,{ref_key:"input",ref:s,modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=p=>m.value=p),placeholder:"",max:99999,min:0,onKeydown:[rt(me(w,["prevent"]),["enter"]),a[2]||(a[2]=me(()=>{},["stop"]))],onKeyup:a[3]||(a[3]=me(()=>{},["stop"])),onChange:l},null,8,["modelValue","onKeydown"])])])])],2)}}},yo=N(bo,[["__scopeId","data-v-1f1e9af4"]]);const wo={class:"material-container"},Eo={class:"material-name"},xo={class:"material-name-text"},Co={key:0,class:"component-container"},$o={key:0,class:"component-title"},Lo={key:0,class:"component-title"},ko={key:0,class:"component-title"},Do={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu",c=t(""),d=t([]),m=t("#000000"),y=t("Metalness"),w=t(0),g=t(0),n=t(0),l=t(1.5),i=t("#000000"),a=t(1),_=t(1),p=t(.1),v=t(0),C=t(.5),$=t(0),h=t("#000000"),S=t(.05),T=t(1),z=t("#FFFFFF"),P=t(1),k=t(!0),H=ve({x:0,y:0}),{x:J,y:ue}=fe(H),Ze=ve({x:0,y:0}),{x:$e,y:Le}=fe(Ze),Qe=ve({x:1,y:1}),{x:pe,y:et}=fe(Qe),ke=t(0),De=t("Repeat"),Te=t("Repeat"),tt=t([{type:"color-picker",name:"color",title:x(()=>E.global.t("color")),value:m},{type:"slider",name:"roughness",title:x(()=>E.global.t("roughness")),props:{step:.01,min:0,max:1},workflow:"Metalness",value:w},{type:"slider",name:"metalness",title:x(()=>E.global.t("metalness")),props:{step:.01,min:0,max:1},workflow:"Metalness",value:g},{type:"color-picker",name:"specularColor",title:x(()=>E.global.t("specularColor")),workflow:"Specular",value:z},{type:"slider",name:"glossiness",title:x(()=>E.global.t("glossiness")),props:{step:.01,min:0,max:1},workflow:"Specular",value:P},{type:"slider",name:"transmission",title:x(()=>E.global.t("transmission")),props:{step:.01,min:0,max:1},value:n},{type:"slider",name:"ior",title:x(()=>E.global.t("ior")),props:{step:.01,min:1,max:2.2},value:l},{type:"color-picker",name:"emissive",title:x(()=>E.global.t("emissive")),value:i},{type:"slider",name:"emissiveIntensity",title:x(()=>E.global.t("emissive intensity")),value:a,props:{step:.01,min:1,max:10}},{type:"slider",name:"alpha",title:x(()=>E.global.t("alpha")),props:{step:.01,min:0,max:1},value:T}]),ot=t([{type:"slider",name:"subsurface",title:x(()=>E.global.t("subsurface")),props:{step:.01,min:0,max:1},value:$},{type:"color-picker",name:"subsurfaceColor",title:x(()=>E.global.t("subsurface color")),value:h},{type:"slider",name:"subsurfaceMFP",title:x(()=>E.global.t("subsurface mfp")),props:{precision:3,step:.01,min:0,max:1},value:S}]),Re=t([{type:"slider",name:"clearcoat",title:x(()=>E.global.t("clearcoat")),props:{step:.01,min:0,max:1},value:_},{type:"slider",name:"clearcoatRoughness",title:x(()=>E.global.t("clearcoat roughness")),props:{step:.01,min:0,max:1},value:p},{type:"slider",name:"sheen",title:x(()=>E.global.t("sheen")),props:{step:.01,min:0,max:1},value:v},{type:"slider",name:"sheenTint",title:x(()=>E.global.t("sheen tint")),props:{step:.01,min:0,max:1},value:C}]),nt=t([{type:"input-group",name:"offset",show:!0,props:{title:x(()=>E.global.t("offset")),precision:3},value:{x:{value:J,name:"X",step:.01},y:{value:ue,name:"Y",step:.01}}},{type:"input-group",name:"repeat",show:!0,props:{title:x(()=>E.global.t("repeat")),precision:3},value:{x:{value:$e,name:"X",step:.01},y:{value:Le,name:"Y",step:.01}}},{type:"input-group",name:"center",show:!0,props:{title:x(()=>E.global.t("center")),precision:3},value:{x:{value:pe,name:"X",step:.01},y:{value:et,name:"Y",step:.01}}},{type:"slider",name:"rotation",title:x(()=>E.global.t("rotation")),props:{step:1,min:0,max:360},value:ke},{type:"select",name:"wrapS",title:x(()=>E.global.t("wrapS")),props:{options:[{label:"Repeat",value:"Repeat"},{label:"ClampToEdge",value:"ClampToEdge"},{label:"MirroredRepeat",value:"MirroredRepeat"}]},value:De},{type:"select",name:"wrapT",title:x(()=>E.global.t("wrapT")),props:{options:[{label:"Repeat",value:"Repeat"},{label:"ClampToEdge",value:"ClampToEdge"},{label:"MirroredRepeat",value:"MirroredRepeat"}]},value:Te}]),at=t(s?[{title:"Subsurface",components:ot},{title:"Advanced",components:Re}]:[{title:"Advanced",components:Re}]),Me=t({title:"Texture UV Transform",components:nt}),Se={1e3:"Repeat",1001:"ClampToEdge",1002:"MirroredRepeat"};let Ie=!0;async function re(U,f,Y){switch(U=="color"&&(m.value=f),U=="specularColor"&&(z.value=f),U=="emissive"&&(i.value=f),U=="subsurfaceColor"&&(h.value=f),U){case"color":case"specularColor":case"emissive":case"subsurfaceColor":f=ht(f);break}if(U.includes("subsurface")&&Ie){Ie=!1;const ae=document.querySelector(".building-text-container .building-text"),I=document.querySelector(".building-text-container");I.classList.add("building"),ae.textContent="Building...",await editor.renderListener.updateMeshMaterialParam(U,f,Y),I.classList.remove("building")}else await editor.renderListener.updateMeshMaterialParam(U,f,Y);U=="transmission"&&f>0&&editor.tracer.bounces<5&&(editor.tracer.bounces=5)}function Ve(U,f,Y){editor.renderListener.updateMeshMaterialUVTransformParam(U,f,Y)}function _e(U){const f=U.material;f.color?m.value=`#${f.color.getHexString()}`:m.value=ge(f.userData.color),w.value=f.roughness??f.userData.roughness,g.value=f.metalness??f.userData.metalness,n.value=f.transmission??f.userData.transmission,l.value=f.ior??f.userData.ior,f.emissive?i.value=`#${f.emissive.getHexString()}`:i.value=ge(f.userData.emissive),a.value=f.emissiveIntensity??f.userData.emissiveIntensity,_.value=f.clearcoat??f.userData.clearcoat,p.value=f.clearcoatRoughness??f.userData.clearcoatRoughness,v.value=f.sheen??f.userData.sheen,C.value=f.sheenTint??f.userData.sheenTint,T.value=f.opacity??f.userData.alpha,y.value=="Specular"&&(z.value=`#${f.specular.getHexString()}`,P.value=f.glossiness),$.value=f.userData.subsurface,S.value=f.userData.subsurfaceMFP,h.value=ge(f.userData.subsurfaceColor),k.value=!!f.map,Oe(U)}function Oe(U){const f=U.material;if(!f.map)return;J.value=f.map.offset.x,ue.value=f.map.offset.y,$e.value=f.map.repeat.x,Le.value=f.map.repeat.y,pe.value=f.map.center.x,pe.value=f.map.center.y,ke.value=bt.radToDeg(f.map.rotation);const Y=f.map.wrapS,ae=f.map.wrapT;De.value=Se[Y],Te.value=Se[ae]}function st(U){if(!U||!U.material)return;const f=U.material;c.value=f.name,y.value=f.isGLTFSpecularGlossinessMaterial?"Specular":"Metalness",_e(U)}return B(()=>{Editor.on(Editor.events.OBJECT_SELECTED,st),Editor.on(Editor.events.MATERIAL_PARAM_CHANGE,_e),Editor.on(Editor.events.MATERIAL_CHANGE,_e),Editor.on(Editor.events.MATERIAL_TEXTURE_PARAM_CHANGE,Oe)}),(U,f)=>{const Y=R("el-collapse-item"),ae=R("el-collapse");return o(),r("div",wo,[e("div",Eo,[ne(" Name: "),e("span",xo,D(c.value),1)]),(o(!0),r(V,null,O(tt.value,(I,se)=>(o(),r(V,{key:se},[!I.workflow||y.value==I.workflow?(o(),r("div",Co,[I.title?(o(),r("div",$o,D(I.title),1)):W("",!0),(o(),j(q(I.type),te({class:"componet-body",modelValue:I.value,"onUpdate:modelValue":A=>I.value=A},I.props,{onChange:A=>re(I.name,A,!0),onInput:A=>(I.type=="slider"||"color-picker")&&re(I.name,A,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))])):W("",!0)],64))),128)),b(ae,{modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=I=>d.value=I),class:"inner-collapse",accordion:""},{default:L(()=>[(o(!0),r(V,null,O(at.value,(I,se)=>(o(),j(Y,{title:I.title,name:se},{default:L(()=>[(o(!0),r(V,null,O(I.components,(A,lt)=>(o(),r("div",{key:lt,class:"component-container"},[A.title?(o(),r("div",Lo,D(A.title),1)):W("",!0),(o(),j(q(A.type),te({class:"componet-body",modelValue:A.value,"onUpdate:modelValue":le=>A.value=le},A.props,{onChange:le=>re(A.name,le,!0),onInput:le=>(A.type=="slider"||"color-picker")&&re(A.name,le,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:2},1032,["title","name"]))),256)),s?G((o(),j(Y,{key:0,title:Me.value.title,name:"uv"},{default:L(()=>[(o(!0),r(V,null,O(Me.value.components,(I,se)=>(o(),r("div",{key:se,class:"component-container"},[I.title?(o(),r("div",ko,D(I.title),1)):W("",!0),(o(),j(q(I.type),te({class:"componet-body",modelValue:I.value,"onUpdate:modelValue":A=>I.value=A},I.props,{onChange:A=>Ve(I.name,A,!0),onInput:A=>(I.type=="slider"||"input-group")&&Ve(I.name,A,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1},8,["title"])),[[K,k.value]]):W("",!0)]),_:1},8,["modelValue"])])}}},To=N(Do,[["__scopeId","data-v-f4fe57d2"]]);const Ro={class:"mesh-container"},Mo={class:"header-container"},So={class:"tab-header"},Io={class:"tab-title"},Vo={class:"tab-title-text"},Oo={class:"collapse-container"},Uo={__name:"index",setup(u){const s=t(!1),c=t(""),d=t([1]),m=t({title:x(()=>E.global.t("property")),icon:"transform"});function y(w){w?(s.value=!0,w.isMesh?c.value="material":c.value=""):s.value=!1}return B(()=>{Editor.on(Editor.events.OBJECT_SELECTED,y)}),(w,g)=>{const n=R("el-empty"),l=R("el-collapse-item"),i=R("el-collapse"),a=R("el-scrollbar");return o(),r("div",Ro,[e("div",Mo,[e("div",So,[e("div",Io,[e("span",{class:F(["iconfont tab-icon","icon-"+m.value.icon])},null,2),e("span",Vo,D(m.value.title),1)])])]),G(e("div",Oo,[b(a,{class:"mesh-scrollbar",height:"100%"},{default:L(()=>[G(b(i,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=_=>d.value=_)},{default:L(()=>[b(l,{title:"Material",name:1},{default:L(()=>[b(To),G(b(n,{description:"No Selected Mesh"},null,512),[[K,c.value!="material"]])]),_:1})]),_:1},8,["modelValue"]),[[K,c.value=="material"]]),G(b(n,{description:"No Selected Mesh"},null,512),[[K,c.value!="material"]])]),_:1})],512),[[K,s.value]])])}}},Ao=N(Uo,[["__scopeId","data-v-44a33a6d"]]),Po={class:"setting-container"},Fo={class:"component-title"},Bo={class:"component-container"},No={class:"component-title"},Go={class:"component-container"},Ko={class:"component-title"},jo={class:"component-container"},zo={class:"component-title"},Ho={__name:"index",setup(u){const s=t(2),c=t(4),d=t(1),m=t(0),y=t("Linear"),w=t(!1),g=t("#000000"),n=t(!1),l=t(4),i=t("Auto"),a=t([{type:"slider",name:"downsamplingFactor",title:x(()=>E.global.t("moving downsampling")),props:{step:1,min:1,max:10},value:c},{type:"slider",name:"envMapIntensity",title:x(()=>E.global.t("env map intensity")),props:{step:.1,min:0,max:5},value:d},{type:"slider",name:"envRotation",title:x(()=>E.global.t("env rotation")),props:{step:1,min:0,max:360},value:m},{type:"el-switch",name:"enableBackgroundColor",title:x(()=>E.global.t("enable bgcolor")),props:{size:"small"},value:w},{type:"color-picker",name:"backgroundColor",title:x(()=>E.global.t("bgcolor")),value:g},{type:"select",name:"toneMapping",title:x(()=>E.global.t("tone mapping")),props:{options:[{label:"Linear",value:"Linear"},{label:"ACES",value:"ACES"}]},value:y}]),_=[{label:"Auto",value:"Auto"},{label:"Manual",value:"Manual"}];function p($,h){editor.renderListener.updateTracerSetting($,h)}function v($){editor.setTileRenderMode($)}function C(){const $=editor.tracer;s.value=$.bounces,c.value=$.downsamplingFactor,d.value=$.envMapIntensity,m.value=$.envRotation,y.value=$.toneMapping,w.value=$.enableBackgroundColor,g.value=$.backgroundColor.getHex(),n.value=$.enableTileRender,l.value=$.tileNumber,i.value==editor.autoTile}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,C)}),($,h)=>{const S=R("el-switch"),T=R("el-option"),z=R("el-select"),P=R("slider");return o(),r("div",Po,[(o(!0),r(V,null,O(a.value,(k,H)=>(o(),r("div",{key:H,class:"component-container"},[e("div",Fo,D(k.title),1),(o(),j(q(k.type),te({class:"componet-body",modelValue:k.value,"onUpdate:modelValue":J=>k.value=J},k.props,{onChange:J=>p(k.name,J),onInput:J=>k.type=="slider"&&p(k.name,J)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128)),e("div",Bo,[e("div",No,D($.$t("enable tile")),1),b(S,{class:"componet-body",onChange:h[0]||(h[0]=k=>p("enableTileRender",k)),modelValue:n.value,"onUpdate:modelValue":h[1]||(h[1]=k=>n.value=k),size:"small"},null,8,["modelValue"])]),e("div",Go,[e("div",Ko,D($.$t("tile setting mode")),1),b(z,{class:"componet-body",modelValue:i.value,"onUpdate:modelValue":h[2]||(h[2]=k=>i.value=k),placeholder:"Select",onChange:h[3]||(h[3]=k=>v(k))},{default:L(()=>[(o(),r(V,null,O(_,k=>b(T,{key:k.value,label:k.label,value:k.value,disabled:k.disabled},{default:L(()=>[e("div",null,D(k.label),1)]),_:2},1032,["label","value","disabled"])),64))]),_:1},8,["modelValue"])]),e("div",jo,[e("div",zo,D($.$t("tile number")),1),b(P,{class:"componet-body",onChange:h[4]||(h[4]=k=>p("tileNumber",k)),onInput:h[5]||(h[5]=k=>p("tileNumber",k)),disabled:i.value=="Auto",modelValue:l.value,"onUpdate:modelValue":h[6]||(h[6]=k=>l.value=k),step:1,min:1,max:32},null,8,["disabled","modelValue"])])])}}},Wo={class:"camera-container"},qo={key:0,class:"component-title"},Jo={__name:"index",setup(u){const s=t("Perspective"),c=t(0),d=t(10),m=t(""),y=t(!0),w=t([{type:"select",name:"type",title:x(()=>E.global.t("type")),props:{options:[{label:"Perspective",value:"Perspective"},{label:"Orthographic",value:"Orthographic"}]},value:s},{type:"select",name:"viewAngle",title:x(()=>E.global.t("view angle")),props:{options:[{label:"Front",value:"Front"},{label:"Back",value:"Back"},{label:"Right",value:"Right"},{label:"Left",value:"Left"},{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"}]},value:m},{type:"el-switch",name:"autoFocus",title:x(()=>E.global.t("autoFocus")),props:{size:"small"},value:y},{type:"slider",name:"aperture",title:x(()=>E.global.t("aperture")),props:{step:.001,min:0,max:1},value:c},{type:"slider",name:"focus",title:x(()=>E.global.t("focus")),props:{step:.1,min:.1,max:100},value:d}]);function g(a,_){editor.renderListener.updateCameraSetting(a,_)}function n(){const a=editor.camera,_=a.isPerspectiveCamera?"Perspective":"Orthographic";s.value=_,c.value=a.aperture,d.value=a.focus,y.value=editor.renderListener.enableRightClickFocus}function l(a){let _="",p="";switch(a.name){case"refocus":editor.renderListener.autoFitCameraByModel();break;case"switchCamera":let C=s.value=="Perspective"?"Orthographic":"Perspective";editor.switchCamera(C),s.value=C;break;case"viewAngleFront":switch(p=a.oriEvent.key,p){case"1":_="Front";break;case"2":_="Right";break;case"3":_="Top";break}m.value=_,editor.renderListener.setCameraViewAngle(_);break;case"viewAngleBack":switch(p=a.oriEvent.key,p){case"4":_="Back";break;case"5":_="Left";break;case"6":_="Bottom";break}m.value=_,editor.renderListener.setCameraViewAngle(_);break}}function i(){const a=editor.camera;d.value=a.focus}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,n),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,l),Editor.on(Editor.events.CAMERA_PARAM_CHANGE,i)}),(a,_)=>(o(),r("div",Wo,[(o(!0),r(V,null,O(w.value,(p,v)=>(o(),r("div",{key:v,class:"component-container"},[p.title?(o(),r("div",qo,D(p.title),1)):W("",!0),(o(),j(q(p.type),te({class:"componet-body",modelValue:p.value,"onUpdate:modelValue":C=>p.value=C},p.props,{onChange:C=>g(p.name,C),onInput:C=>p.type=="slider"&&g(p.name,C)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]))}},Xo={class:"postprocessing-container"},Yo={key:0,class:"component-title"},Zo={key:0,class:"component-title"},Qo={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu",c=t([1]),d=t(!1),m=t(.8),y=t(.1),w=t(1),g=t(.5),n=t(!1),l=t(.5),i=t(.5),a=t([{type:"el-switch",name:"enabled",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:d},{type:"slider",name:"threshold",title:x(()=>E.global.t("threshold")),props:{step:.01,min:0,max:1},value:m},{type:"slider",name:"smooth",title:x(()=>E.global.t("smooth")),props:{step:.001,min:0,max:.5},value:y},{type:"slider",name:"radius",title:x(()=>E.global.t("radius")),props:{step:.01,min:0,max:2},value:g},{type:"slider",name:"strength",title:x(()=>E.global.t("strength")),props:{step:.01,min:0,max:5},value:w}]),_=t([{type:"el-switch",name:"enabled",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:n},{type:"slider",name:"offset",title:x(()=>E.global.t("offset")),props:{step:.01,min:0,max:1},value:l},{type:"slider",name:"darkness",title:x(()=>E.global.t("darkness")),props:{step:.01,min:0,max:1},value:i}]);function p(C,$,h){editor.renderListener.updatePostProcessingSetting(C,$,h)}function v(){const C=editor.renderListener.composer.bloomPass;d.value=C.enabled,m.value=C.threshold,y.value=C.smooth,w.value=C.strength,s&&(g.value=C.radius);const $=editor.renderListener.composer.vignettePass;n.value=$.enabled,l.value=$.offset,i.value=$.darkness}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,v)}),(C,$)=>{const h=R("el-collapse-item"),S=R("el-collapse");return o(),r("div",Xo,[b(S,{modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=T=>c.value=T),class:"inner-collapse"},{default:L(()=>[b(h,{title:"Bloom",name:1},{default:L(()=>[(o(!0),r(V,null,O(a.value,(T,z)=>(o(),r("div",{key:z,class:"component-container"},[T.title?(o(),r("div",Yo,D(T.title),1)):W("",!0),(o(),j(q(T.type),te({class:"componet-body",modelValue:T.value,"onUpdate:modelValue":P=>T.value=P},T.props,{onChange:P=>p("bloom",T.name,P),onInput:P=>T.type=="slider"&&p("bloom",T.name,P)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1}),b(h,{title:"Vignette",name:2},{default:L(()=>[(o(!0),r(V,null,O(_.value,(T,z)=>(o(),r("div",{key:z,class:"component-container"},[T.title?(o(),r("div",Zo,D(T.title),1)):W("",!0),(o(),j(q(T.type),te({class:"componet-body",modelValue:T.value,"onUpdate:modelValue":P=>T.value=P},T.props,{onChange:P=>p("vignette",T.name,P),onInput:P=>T.type=="slider"&&p("vignette",T.name,P)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1})]),_:1},8,["modelValue"])])}}},en={class:"denoise-container"},tn={key:0,class:"component-title"},on={__name:"index",setup(u){const s=t(!1),c=t(0),d=t(0),m=t(0),y=t([{type:"el-switch",name:"enableDenoise",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:s},{type:"slider",name:"denoiseColorFactor",title:x(()=>E.global.t("color factor")),props:{step:1e-4,min:0,max:1.5},value:c},{type:"slider",name:"denoiseNormalFactor",title:x(()=>E.global.t("normal factor")),props:{step:1e-4,min:0,max:1.5},value:d},{type:"slider",name:"denoisePositionFactor",title:x(()=>E.global.t("position factor")),props:{step:1e-4,min:0,max:1.5},value:m}]);function w(n,l){editor.renderListener.updateDenoiseSetting(n,l)}function g(){const n=editor.tracer;s.value=n.enableDenoise,c.value=n.denoiseColorFactor,d.value=n.denoiseNormalFactor,m.value=n.denoisePositionFactor}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,g)}),(n,l)=>(o(),r("div",en,[(o(!0),r(V,null,O(y.value,(i,a)=>(o(),r("div",{key:a,class:"component-container"},[i.title?(o(),r("div",tn,D(i.title),1)):W("",!0),(o(),j(q(i.type),te({class:"componet-body",modelValue:i.value,"onUpdate:modelValue":_=>i.value=_},i.props,{onChange:_=>w(i.name,_),onInput:_=>i.type=="slider"&&w(i.name,_)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]))}};const nn={class:"render-container"},an={class:"header-container"},sn={class:"tab-header"},ln={class:"tab-title"},rn={class:"tab-title-text"},cn={class:"collapse-container"},dn={__name:"index",setup(u){const s=t([1]),c=t({title:x(()=>E.global.t("render")),icon:"render"});return(d,m)=>{const y=R("el-collapse-item"),w=R("el-collapse"),g=R("el-scrollbar");return o(),r("div",nn,[e("div",an,[e("div",sn,[e("div",ln,[e("span",{class:F(["iconfont tab-icon","icon-"+c.value.icon])},null,2),e("span",rn,D(c.value.title),1)])])]),e("div",cn,[b(g,{class:"mesh-scrollbar",height:"100%"},{default:L(()=>[b(w,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=n=>s.value=n),accordion:""},{default:L(()=>[b(y,{title:"Setting",name:1},{default:L(()=>[b(Ho)]),_:1}),b(y,{title:"Denoise",name:2},{default:L(()=>[b(on)]),_:1}),b(y,{title:"Camera",name:3},{default:L(()=>[b(Jo)]),_:1}),b(y,{title:"PostProcessing",name:4},{default:L(()=>[b(Qo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])}}},un=N(dn,[["__scopeId","data-v-89efe350"]]);const pn=u=>(Z("data-v-f8c16c51"),u=u(),Q(),u),_n={class:"material-library-list"},mn={class:"list-container"},vn={class:"material-group-title"},fn={class:"material-library-list"},gn={class:"item-image-container"},hn=["draggable","onDragstart"],bn=["onClick"],yn={class:"file-size"},wn=pn(()=>e("div",{class:"iconfont icon-download item-download-icon"},null,-1)),En={class:"item-title"},xn={__name:"index",setup(u){const s=new de().setResponseType("blob"),c=t([{title:"Floor / Wood / Marble / Stone",list:Ue},{title:"Metal",list:Ae},{title:"Fabric / Leather / Pattern",list:Pe}]),d=t([...Pe,...Ue,...Ae]);function m(){d.value.forEach(n=>{const l=n.texturesURL,i=Object.keys(l);localforage.getItem(`material-${n.type}-${n.name}-${i[0]}`).then(a=>{a&&(n.downloaded=!0)})})}m();function y(n){if(n.isDownloading)return;n.isDownloading=!0;const l=n.texturesURL,i=Object.keys(l),a=i.length;let _=0;i.map(p=>{const v=l[p];s.load(v,C=>{localforage.setItem(`material-${n.type}-${n.name}-${p}`,C).then($=>{_++,n.progress=Math.round(_/a*100),_==a&&(n.downloaded=!0,n.isDownloading=!1)})})})}function w(n,l){if(!n.downloaded)return;window.isLibraryDrag=!0;const i=n.texturesURL,a=Object.keys(i),_=[];a.map(v=>{_.push(`material-${n.type}-${n.name}-${v}`)});const p=JSON.stringify({type:"material",itemType:n.type,cacheKey:JSON.stringify(_),textureKey:JSON.stringify(a)});l.dataTransfer.setData("transData",p)}function g(){window.isLibraryDrag=!1,console.log("handleDragEnd")}return(n,l)=>{const i=R("el-progress");return o(),r("div",_n,[(o(!0),r(V,null,O(c.value,(a,_)=>(o(),r("div",mn,[e("div",vn,D(a.title),1),e("div",fn,[(o(!0),r(V,null,O(a.list,(p,v)=>(o(),r("div",{key:v,class:F(["list-item-container",p.downloaded?"downloaded":"no-downloaded"])},[e("div",gn,[e("div",{class:"item-image",draggable:p.downloaded,onDragstart:C=>w(p,C),onDragend:g,style:xe({"background-image":`url(${p.previewURL})`})},null,44,hn),p.downloaded?W("",!0):(o(),r("div",{key:0,class:"download-mask-container",onClick:C=>y(p)},[G(b(i,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:p.progress},null,8,["percentage"]),[[K,p.progress!=0]]),e("span",yn,D(p.fileSize),1),wn],8,bn))]),e("div",En,D(p.name),1)],2))),128))])]))),256))])}}},Cn=N(xn,[["__scopeId","data-v-f8c16c51"]]);const $n=u=>(Z("data-v-a5234a73"),u=u(),Q(),u),Ln={class:"envmap-library-list"},kn={class:"item-image-container"},Dn=["draggable","onDragstart"],Tn=["onClick"],Rn={class:"file-size"},Mn=$n(()=>e("span",{class:"iconfont icon-download item-download-icon"},null,-1)),Sn={class:"item-title"},In={__name:"index",setup(u){const s=new de().setResponseType("blob"),c=t(ze);function d(){c.value.forEach(n=>{localforage.getItem(`envMap-${n.type}-${n.name}`).then(l=>{l&&(n.downloaded=!0)})})}d();function m(n){n.isDownloading||(n.isDownloading=!0,s.load(n.sourceURL,l=>{localforage.setItem(`envMap-${n.type}-${n.name}`,l).then(i=>{n.downloaded=!0,n.isDownloading=!1})},l=>{const i=Math.round(l.loaded/l.total*100);n.progress=i}))}function y(n,l){if(!n.downloaded)return;window.isLibraryDrag=!0;const i=JSON.stringify({type:"envMap",itemType:n.type,cacheKey:`envMap-${n.type}-${n.name}`});l.dataTransfer.setData("transData",i)}function w(){window.isLibraryDrag=!1}function g(){d()}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,g)}),(n,l)=>{const i=R("el-progress");return o(),r("div",Ln,[(o(!0),r(V,null,O(c.value,(a,_)=>(o(),r("div",{key:_,class:F(["list-item-container",a.downloaded?"downloaded":"no-downloaded"])},[e("div",kn,[e("div",{class:"item-image",draggable:a.downloaded,onDragstart:p=>y(a,p),onDragend:w,style:xe({"background-image":`url(${a.previewURL})`})},null,44,Dn),a.downloaded?W("",!0):(o(),r("div",{key:0,class:"download-mask-container",onClick:p=>m(a)},[G(b(i,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:a.progress},null,8,["percentage"]),[[K,a.progress!=0]]),e("span",Rn,D(a.fileSize),1),Mn],8,Tn))]),e("div",Sn,D(a.name),1)],2))),128))])}}},Ge=N(In,[["__scopeId","data-v-a5234a73"]]);const Vn=u=>(Z("data-v-1cc54ed4"),u=u(),Q(),u),On={class:"model-library-container"},Un={class:"list-container"},An={class:"model-group-title"},Pn={class:"model-library-list"},Fn={class:"item-image-container"},Bn=["draggable","onDragstart"],Nn=["onClick"],Gn={class:"file-size"},Kn=Vn(()=>e("div",{class:"iconfont icon-download item-download-icon"},null,-1)),jn={class:"item-title"},zn={__name:"index",setup(u){const s=new de().setResponseType("blob"),c=t([{title:"Classic",list:ye},{title:"Basic",list:Fe},{title:"Sketchfab",list:Be},{title:"Detail",list:Ne}]),d=t([...ye,...Be,...Fe,...Ne]);function m(){d.value.forEach(l=>{localforage.getItem(`model-${l.type}-${l.name}`).then(i=>{i&&(l.downloaded=!0)})})}m();async function y(l){if(l.isDownloading)return;const i=`model-${l.type}-${l.name}`;if(await localforage.getItem(i)){l.downloaded=!0;return}else{l.isDownloading=!0;const _=await s.loadAsync(l.sourceURL,p=>{const v=Math.round(p.loaded/p.total*100);l.progress=v});await localforage.setItem(`model-${l.type}-${l.name}`,_),l.downloaded=!0,l.isDownloading=!1}}function w(l,i){if(!l.downloaded)return;window.isLibraryDrag=!0;const a=JSON.stringify({type:"model",itemType:l.type,cacheKey:`model-${l.type}-${l.name}`});i.dataTransfer.setData("transData",a)}function g(){window.isLibraryDrag=!1}function n(){m()}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,n)}),(l,i)=>{const a=R("el-progress");return o(),r("div",On,[(o(!0),r(V,null,O(c.value,(_,p)=>(o(),r("div",Un,[e("div",An,D(_.title),1),e("div",Pn,[(o(!0),r(V,null,O(_.list,(v,C)=>(o(),r("div",{key:C,class:F(["list-item-container",v.downloaded?"downloaded":"no-downloaded"])},[e("div",Fn,[e("div",{class:"item-image",draggable:v.downloaded,onDragstart:$=>w(v,$),onDragend:g,style:xe({"background-image":`url(${v.previewURL})`})},null,44,Bn),v.downloaded?W("",!0):(o(),r("div",{key:0,class:"download-mask-container",onClick:$=>y(v)},[G(b(a,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:v.progress},null,8,["percentage"]),[[K,v.progress!=0]]),e("span",Gn,D(v.fileSize),1),Kn],8,Nn))]),e("div",jn,D(v.name),1)],2))),128))])]))),256))])}}},Ke=N(zn,[["__scopeId","data-v-1cc54ed4"]]);const Je=u=>(Z("data-v-99e1826d"),u=u(),Q(),u),Hn={class:"library-container"},Wn={class:"header-container"},qn={class:"tab-header"},Jn={class:"tab-title"},Xn={class:"tab-title-text"},Yn={class:"library-tabs-container"},Zn={class:"library-tabs-header"},Qn=["onClick"],ea={class:"library-tabs-content-container"},ta={class:"tips"},oa=Je(()=>e("span",{class:"tips-text"},[ne("Download then "),e("b",null,"Drag"),ne(" to scene")],-1)),na=Je(()=>e("a",{href:"/credit/index.html",target:"_blank"},[e("span",{class:"credit-text"},"(Credit List)")],-1)),aa={__name:"index",setup(u){const s=new yt,c=LGL_BACKEND=="webgpu";let d=!1;const m=t({title:x(()=>E.global.t("library")),icon:"library"}),y=t(c?[{name:"Model",component:X(Ke)},{name:"EnvMap",component:X(Ge)},{name:"Material",component:X(Cn)}]:[{name:"Model",component:X(Ke)},{name:"EnvMap",component:X(Ge)}]),w=t("Model");function g(i){w.value!=i&&(w.value=i)}function n(){const i=editor.tracer.canvas;i.addEventListener("dragenter",a=>{a.preventDefault()}),i.addEventListener("dragover",a=>{a.preventDefault()}),i.addEventListener("drop",a=>{if(!window.isLibraryDrag)return;let _=a.dataTransfer.getData("transData");if(!_){ie({message:"Failed to read drag object data. Please try again from library",center:!0,type:"warning",showClose:!0,duration:3e3});return}if(d){ie({message:"Processing the previous model, please wait",center:!0,type:"warning",showClose:!0,duration:3e3});return}d=!0,_=JSON.parse(_);const{type:p,cacheKey:v,itemType:C}=_;if(p=="model"||p=="envMap")localforage.getItem(v).then($=>{let h=LGL_URLCacheMap.get(v);switch(h||(h=URL.createObjectURL($),LGL_URLCacheMap.set(v,h)),p){case"model":editor.sceneListener.loadGLTFModel(h).then(()=>{d=!1});break;case"envMap":editor.sceneListener.loadEnvMap(h).then(()=>{d=!1});break}});else if(p=="material"){const $=JSON.parse(v),h=[],S=JSON.parse(_.textureKey);$.forEach((T,z)=>{localforage.getItem(T).then(P=>{let k=LGL_URLCacheMap.get(T);k||(k=URL.createObjectURL(P),LGL_URLCacheMap.set(v,k)),h.push(new Promise(H=>{s.load(k,H)})),z==$.length-1&&l(a,C,h,S)})})}})}function l(i,a,_,p){const v=new wt;switch(v.roughness=1,a){case"floor":v.metalness=0;break;case"metal":v.metalness=1;break}return Promise.all(_).then(C=>{C.forEach((h,S)=>{const T=p[S];v[T]=h}),i.clientX,i.clientY;const $=editor.pickMesh(i);editor.sceneListener.updateMeshMaterial($,v),d=!1})}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,n)}),(i,a)=>{const _=R("el-scrollbar"),p=R("el-alert");return o(),r("div",Hn,[e("div",Wn,[e("div",qn,[e("div",Jn,[e("span",{class:F(["iconfont tab-icon","icon-"+m.value.icon])},null,2),e("span",Xn,D(m.value.title),1)])])]),e("div",Yn,[e("div",Zn,[(o(!0),r(V,null,O(y.value,v=>(o(),r("div",{key:v.name,class:F(["library-tab-box",{"is-active":v.name==w.value}]),onClick:C=>g(v.name)},[e("span",null,D(v.name),1)],10,Qn))),128))]),e("div",ea,[b(_,{class:"library-scrollbar",height:"100%"},{default:L(()=>[(o(!0),r(V,null,O(y.value,(v,C)=>G((o(),r("div",{key:v.name,class:"library-tab-content"},[(o(),j(q(v.component)))],512)),[[K,v.name==w.value]])),128))]),_:1})])]),e("div",ta,[b(p,{type:"info","show-icon":""},{title:L(()=>[oa,na]),_:1})])])}}},sa=N(aa,[["__scopeId","data-v-99e1826d"]]);const la={class:"tabs-container"},ia=["onClick"],ra={class:"panel-container"},ca={__name:"index",setup(u){const s=t(!0),c=t("Property"),d=t([{name:"Property",icon:"title-setting",component:X(Ao)},{name:"Render",icon:"title-render",component:X(un)},{name:"Library",icon:"title-render",component:X(sa)}]);function m(){}function y(g){c.value==g?s.value=!s.value:(s.value||(s.value=!0),c.value=g)}function w(g){if(g.name=="toggleMenu"){const n=g.targetStatus;s.value=n}}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,m),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,w)}),(g,n)=>(o(),r("div",{class:F(["right-drawer",{open:s.value}])},[e("div",la,[(o(!0),r(V,null,O(d.value,l=>(o(),r("div",{key:l.name,class:F(["tab-box",{"is-active":l.name==c.value}]),onClick:i=>y(l.name)},[e("span",null,D(l.name),1)],10,ia))),128))]),e("div",ra,[(o(!0),r(V,null,O(d.value,(l,i)=>G((o(),r("div",{key:l.name,class:"tab-content-container"},[(o(),j(q(l.component)))],512)),[[K,l.name==c.value]])),128))])],2))}},da=N(ca,[["__scopeId","data-v-c377a282"]]);const ua={class:"tree-container"},pa={class:"tree-header"},_a={class:"tab-title"},ma={class:"tab-title-text"},va={class:"tree-operation"},fa=["onClick"],ga={class:"tree-filter"},ha={class:"tree-body"},ba={class:"custom-tree-node"},ya={class:"node-text"},wa={__name:"index",setup(u){const s=t([]),c=t(""),d=t(),m=t(!0),y=t(!0),w=t({title:x(()=>E.global.t("outliner")),icon:"outliner"}),g=[{icon:"fold",event:"unexpandTree",toolTipText:"fold all"},{icon:"unfold",event:"expandTree",toolTipText:"unfold all"}];ct(c,h=>{d.value&&d.value.filter(h)});const n=(h,S)=>h?S.name?S.name.toLowerCase().indexOf(h.toLowerCase())!==-1:!1:!0;function l(h){switch(h){case"expandTree":a(!0);break;case"unexpandTree":a(!1);break}}function i(h,S){if(h.isObject3D){const T=dt(h);editor.select(T)}}function a(h){y.value=!1,m.value=h,ut(()=>{y.value=!0})}function _(){return editor.scene.children.filter(h=>h.name!="LGL_TRANSFORM_PIVOT")}function p(){s.value=_()}function v(){s.value=[..._()],a(!0)}function C(h){v()}function $(h){if(!h){d.value.setCurrentKey(null);return}const S=h.uuid;d.value.setCurrentKey(S)}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,p),Editor.on(Editor.events.OBJECT_SELECTED,$),Editor.on(Editor.events.OBJECT_ADD,C)}),(h,S)=>{const T=R("el-tooltip"),z=R("el-input"),P=R("el-tree"),k=R("el-scrollbar");return o(),r("div",ua,[e("div",pa,[e("div",_a,[e("span",{class:F(["iconfont tab-icon","icon-"+w.value.icon])},null,2),e("span",ma,D(w.value.title),1),e("div",va,[(o(),r(V,null,O(g,(H,J)=>b(T,{key:J,effect:"light",content:H.toolTipText,placement:"top",offset:10},{default:L(()=>[e("span",{class:F(["iconfont tree-operation-icon","icon-"+H.icon]),onClick:ue=>l(H.event)},null,10,fa)]),_:2},1032,["content"])),64))])])]),e("div",ga,[b(z,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=H=>c.value=H),placeholder:"Filter keyword"},null,8,["modelValue"])]),e("div",ha,[b(k,{height:"100%"},{default:L(()=>[y.value?(o(),j(P,{key:0,ref_key:"treeRef",ref:d,data:s.value,"node-key":"uuid","auto-expand-parent":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":n,props:{label:"name"},indent:6,onNodeClick:i,"empty-text":"No Data","default-expand-all":m.value},{default:L(({node:H,data:J})=>[e("span",ba,[e("span",ya,D(H.label),1)])]),_:1},8,["data","default-expand-all"])):W("",!0)]),_:1})])])}}},Ea=N(wa,[["__scopeId","data-v-e88e0042"]]);const xa={class:"tabs-container"},Ca=["onClick"],$a={class:"panel-container"},La={__name:"index",setup(u){const s=t(!0),c=t("Outliner"),d=t([{name:"Outliner",icon:"title-layer",component:X(Ea)}]);function m(){}function y(g){c.value==g?s.value=!s.value:(s.value||(s.value=!0),c.value=g)}function w(g){if(g.name=="toggleMenu"){const n=g.targetStatus;s.value=n}}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,m),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,w)}),(g,n)=>(o(),r("div",{class:F(["left-drawer",{open:s.value}])},[e("div",xa,[(o(!0),r(V,null,O(d.value,l=>(o(),r("div",{key:l.name,class:F(["tab-box",{"is-active":l.name==c.value}]),onClick:i=>y(l.name)},[e("span",null,D(l.name),1)],10,Ca))),128))]),e("div",$a,[(o(!0),r(V,null,O(d.value,(l,i)=>G((o(),r("div",{key:l.name,class:"tab-content-container"},[(o(),j(q(l.component)))],512)),[[K,l.name==c.value]])),128))])],2))}},ka=N(La,[["__scopeId","data-v-044fd8ba"]]);const ee=u=>(Z("data-v-1342911a"),u=u(),Q(),u),Da={class:"bottom-right-menu-container"},Ta={class:"sponsor-content-container"},Ra=ee(()=>e("div",{class:"sponsor-title-text"},[e("p",null,"LGLTracer is my personal project."),e("p",null,"I have always been pursuing better rendering effects on the Web."),e("p",{class:"sponsor-split"}),e("p",null,"If my project/tool is helpful to you"),e("p",null,"please sponsor me to encourage me to continue development, thanks!")],-1)),Ma={class:"sponsor-button-container"},Sa={class:"wechat-pay"},Ia=ee(()=>e("span",{class:"iconfont icon-wechat sponsor-icon"},null,-1)),Va=ee(()=>e("span",{class:"split-line"},"/",-1)),Oa={class:"alipay-pay"},Ua=ee(()=>e("span",{class:"iconfont icon-alipay sponsor-icon"},null,-1)),Aa={href:"https://www.patreon.com/LGLTracer",target:"_blank"},Pa={class:"sponsor-button-container"},Fa=ee(()=>e("span",{class:"iconfont icon-patreon sponsor-icon"},null,-1)),Ba=ee(()=>e("span",null,"Patreon",-1)),Na={href:"https://ko-fi.com/lgltracer",target:"_blank"},Ga={class:"sponsor-button-container"},Ka=ee(()=>e("span",{class:"iconfont icon-kofi sponsor-icon"},null,-1)),ja=ee(()=>e("span",null,"Donate",-1)),za={class:"qrcode-container"},Ha={class:"qrcode-tabs-header"},Wa=["onClick"],qa={class:"qrcode-tabs-content-container"},Ja=["src"],Xa=ee(()=>e("div",{class:"sponsor-tips"},"赞助可留言微信号，进交流群参与交流",-1)),Ya={class:"menu-content"},Za={class:"tile-fps-count"},Qa={class:"item-text cur-tile-text"},es={class:"item-text cur-fps-text"},ts={__name:"index",setup(u){const s=t(!0),c=t(0),d=t(0);function m(){s.value=!s.value}const y=t(!1),w=t(0),g=t("wechat"),n=t([{name:"wechat",qrCodeURL:"/images/wechat.jpg"},{name:"alipay",qrCodeURL:"/images/alipay.jpg"}]);function l(){w.value=1}function i(v){g.value!=v&&(g.value=v)}function a(){w.value=0}function _(v){const{fps:C}=v;c.value=editor.tracer.tileNumber,d.value=C}function p(){c.value=editor.tracer.tileNumber}return B(()=>{Editor.on(Editor.events.COMMAND_TILE_FPS,_),Editor.on(Editor.events.EDITOR_LOADED,p)}),(v,C)=>{const $=R("el-button"),h=R("el-dialog");return o(),r("div",Da,[e("div",{class:"sponsor-text",onClick:C[0]||(C[0]=S=>y.value=!0)},"Sponsor"),b(h,{modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=S=>y.value=S),width:320,"show-close":"","close-on-click-modal":!1,onClosed:a},{footer:L(()=>[]),default:L(()=>[G(e("div",Ta,[Ra,e("div",Ma,[b($,{color:"#2680c7",onClick:l,class:"sponsor-button"},{default:L(()=>[e("span",Sa,[Ia,e("span",null,D(v.$t("wechat")),1)]),Va,e("span",Oa,[Ua,e("span",null,D(v.$t("alipay")),1)])]),_:1})]),e("a",Aa,[e("div",Pa,[b($,{color:"#333333",class:"sponsor-button"},{default:L(()=>[Fa,Ba]),_:1})])]),e("a",Na,[e("div",Ga,[b($,{color:"#ec5050",class:"sponsor-button"},{default:L(()=>[Ka,ja]),_:1})])])],512),[[K,w.value==0]]),G(e("div",za,[e("div",Ha,[(o(!0),r(V,null,O(n.value,S=>(o(),r("div",{key:S.name,class:F(["qrcode-tab-box",{"is-active":S.name==g.value}]),onClick:T=>i(S.name)},[e("span",null,D(v.$t(S.name)),1)],10,Wa))),128))]),e("div",qa,[(o(!0),r(V,null,O(n.value,(S,T)=>G((o(),r("div",{key:S.name,class:"qrcode-tab-content"},[e("img",{class:"qrcode-image",src:S.qrCodeURL,alt:"",draggable:!1},null,8,Ja)],512)),[[K,S.name==g.value]])),128)),Xa])],512),[[K,w.value==1]]),G(e("div",{onClick:a,class:"back-button iconfont icon-return"},null,512),[[K,w.value==1]])]),_:1},8,["modelValue"]),e("div",{class:F(["tile-fps-container",{"is-open":s.value}])},[e("div",{class:"menu-toggle",onClick:C[2]||(C[2]=S=>m())}),e("ul",Ya,[e("li",Za,[e("span",Qa,D(c.value)+" Tiles",1),e("span",es,D(d.value)+" FPS",1)])])],2)])}}},os=N(ts,[["__scopeId","data-v-1342911a"]]);const ns={class:"info-container"},as={class:"title"},ss={class:"text"},ls={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu"?"WebGPU":"WebGL",c=t(""),d=t(""),m=t(""),y=t([{title:"Graphics API",value:s},{title:"Browser",value:c},{title:"OS",value:d},{title:"GPU",value:m},{title:"LGLTracer Version",value:Et},{title:"Viewer Version",value:xt}]);return ce(()=>{const{browser:w,os:g,graphicsCard:n}=Ct();c.value=w,d.value=g,n&&(m.value=n.renderer)}),(w,g)=>(o(),r("div",ns,[(o(!0),r(V,null,O(y.value,n=>(o(),r("div",{class:"info-row",key:n.title},[e("div",as,D(n.title)+": ",1),e("div",ss,D(n.value),1)]))),128))]))}},is=N(ls,[["__scopeId","data-v-7545ca4a"]]);const rs={class:"info-container"},cs={__name:"index",setup(u){const s=[{operation:"Switch Camera Projection",keyCode:"P , 0"},{operation:"View(Front/Right/Top)",keyCode:"1 / 2 / 3"},{operation:"View(Back/Left/Bottom)",keyCode:"4 / 5 / 6"},{operation:"Play/Pause Rendering",keyCode:"Space"},{operation:"Refocus current scene",keyCode:"F"},{operation:"Toggle left/right panel",keyCode:"T"}];return(c,d)=>{const m=R("el-table-column"),y=R("el-table");return o(),r("div",rs,[b(y,{data:s,stripe:"",style:{width:"100%"}},{default:L(()=>[b(m,{prop:"operation",label:"Operation"}),b(m,{prop:"keyCode",label:"KeyCode"})]),_:1})])}}},ds=N(cs,[["__scopeId","data-v-2a14224d"]]);const us=u=>(Z("data-v-ec0cecf6"),u=u(),Q(),u),ps={class:"bottom-left-menu-container"},_s={class:"button-container"},ms={class:"helper-container"},vs={class:"helper-tabs-header"},fs=["onClick"],gs={class:"helper-tabs-content-container"},hs=us(()=>e("div",{class:"contact-footer"},[ne("Any questions? Contact me :D "),e("a",{href:"// Todo",target:"_blank"},[e("span",{class:"contact-icon iconfont icon-discord"})]),e("a",{href:"mailto:lg2lugang@gmail.com",target:"_blank"},[e("span",{class:"contact-icon iconfont icon-email"})]),e("a",{href:"https://twitter.com/WebAMV",target:"_blank"},[e("span",{class:"contact-icon iconfont icon-twiter"})])],-1)),bs={__name:"index",setup(u){const s=t(!1),c=t("info"),d=t([{name:"info",component:X(is)},{name:"shortcut",component:X(ds)}]);function m(g){c.value!=g&&(c.value=g)}function y(){editor.renderListener.getScreenshot()}function w(){editor.renderListener.autoFitCameraByModel()}return(g,n)=>{const l=R("el-tooltip"),i=R("el-dialog");return o(),r("div",ps,[e("div",_s,[e("div",{class:"button helper-button iconfont icon-help",onClick:n[0]||(n[0]=a=>s.value=!0)}),b(l,{effect:"light",content:"screenshot",placement:"top",offset:10},{default:L(()=>[e("div",{onClick:y,class:"button camera-button iconfont icon-camera"})]),_:1}),b(i,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=a=>s.value=a),width:380,"show-close":"","close-on-click-modal":!1},{footer:L(()=>[hs]),default:L(()=>[e("div",ms,[e("div",vs,[(o(!0),r(V,null,O(d.value,a=>(o(),r("div",{key:a.name,class:F(["helper-tab-box",{"is-active":a.name==c.value}]),onClick:_=>m(a.name)},[e("span",null,D(g.$t(a.name)),1)],10,fs))),128))]),e("div",gs,[(o(!0),r(V,null,O(d.value,(a,_)=>G((o(),r("div",{key:a.name,class:"helper-tab-content"},[(o(),j(q(a.component)))],512)),[[K,a.name==c.value]])),128))])])]),_:1},8,["modelValue"]),b(l,{effect:"light",content:"refocus(F)",placement:"top",offset:10},{default:L(()=>[e("div",{onClick:w,class:"button camera-button iconfont icon-focus"})]),_:1})])])}}},ys=N(bs,[["__scopeId","data-v-ec0cecf6"]]),ws={class:"scene-container"},Es={__name:"App",setup(u){return ce(()=>{}),(s,c)=>(o(),r("div",ws,[b(to),b(po),b(yo),b(ka),b(da),b(ys),b(os),b(io)]))}},M=pt(Es);M.use(E);M.component("ElTree",$t);M.component("ElInput",Lt);M.component("ElTabs",kt);M.component("ElTabPane",Dt);M.component("ElScrollbar",_t);M.component("ElTooltip",mt);M.component("ElForm",Tt);M.component("ElFormItem",Rt);M.component("ElCollapse",Mt);M.component("ElCollapseItem",St);M.component("ElSlider",It);M.component("ElSelect",Vt);M.component("ElOption",Ot);M.component("ElSwitch",Ut);M.component("ElMenu",At);M.component("ElMenuItem",Pt);M.component("ElSubMenu",Ft);M.component("ElEmpty",Bt);M.component("ElDialog",Nt);M.component("ElButton",Gt);M.component("ElTimeline",Kt);M.component("ElTimelineItem",jt);M.component("ElProgress",zt);M.component("ElTable",vt);M.component("ElTableColumn",ft);M.component("ElAlert",Ht);M.component("InputNumber",Wt);M.component("InputGroup",qt);M.component("ColorPicker",Jt);M.component("Slider",Xt);M.component("Select",Yt);!navigator.gpu||!navigator.gpu.getPreferredCanvasFormat?(window.LGL_BACKEND="webgl",document.body.classList.add("webgl")):window.LGL_BACKEND="webgpu";window.LGL_BACKEND=="webgl"&&Zt({title:"Warning",message:`Your device/browser does not support WebGPU!
			It has fallen back to the WebGL version,
			many functions/features will be limited!`,type:"warning",duration:0});window.Editor=He;const oe=new He(window.LGL_BACKEND);window.editor=oe;window.localforage=we;const Ee=new Map;window.LGL_URLCacheMap=Ee;const xs=new de().setResponseType("blob"),Cs=console.error,$s=console.warn;console.error=function(...s){const c=s[0];ie({message:c,center:!0,type:"error",showClose:!0,duration:5e3}),Cs.apply(console,s)};console.warn=function(...s){const c=s[0];ie({message:c,center:!0,type:"warning",showClose:!0,duration:3500}),$s.apply(console,s)};function Xe(){const u=window.innerWidth,s=window.innerHeight;oe.setSize(u,s)}window.addEventListener("resize",Qt(Xe,100));const he=ye[1],be=ze[0];async function je(u,s){const c=await we.getItem(u);if(c){let d=Ee.get(u);return d||(d=URL.createObjectURL(c)),d}else{const d=await xs.loadAsync(s);await we.setItem(u,d);const m=URL.createObjectURL(d);return Ee.set(u,m),m}}const Ls=document.querySelector(".entry-loading .progress-text"),ks=document.querySelector(".entry-loading .progress-line");function Ds(u){const s=Math.round(u*100);Ls.textContent=`${s}%`,ks.style.width=`${s}%`}const Ts=document.querySelector(".building-text-container .building-text"),Ye=document.querySelector(".building-text-container");function Rs(){Ye.classList.add("building")}function Ms(u){const s=Math.round(u*100);Ts.textContent=`Building(${s}%)`}function Ss(){Ye.classList.remove("building")}async function Is(){const u=await je(`model-${he.type}-${he.name}`,he.sourceURL),s=await je(`envMap-${be.type}-${be.name}`,be.sourceURL);await oe.loadData(u,s,Ds),document.body.classList.remove("loading"),oe.tracer.onBuildingBeginCallback=Rs,oe.tracer.onBuildingProgressCallback=Ms,oe.tracer.onBuildingEndCallback=Ss,Xe(),oe.play()}M.mount("#app");Is();

import{r as t,v as de,V as B,x as it,o,c as i,b as e,_ as N,B as F,p as Z,e as Q,a as R,d as b,w as k,J as ne,G as D,H as rt,C as me,s as ve,y as ge,q as x,W as V,X as A,F as H,z as j,Y as ee,D as W,A as G,K,n as xe,Z as J,t as ct,$ as dt,h as ut,f as pt,a0 as _t,a1 as mt,E as vt,g as gt}from"./el-tag-2a796b49.js";import{x as ft,g as re,h as E,l as ht,r as fe,k as bt,F as ue,m as Oe,n as Ue,p as Pe,q as ze,C as ye,B as Fe,S as Be,H as Ne,s as yt,t as wt,L as Et,aa as xt,w as Ct,y as $t,a as Lt,z as kt,A as Dt,D as Tt,G as Rt,I as Mt,J as St,K as It,N as Vt,O as At,P as Ot,R as Ut,U as Pt,W as Ft,X as Bt,Y as Nt,E as Gt,Z as Kt,_ as jt,$ as zt,a0 as Ht,a1 as Wt,a2 as qt,a3 as Jt,a4 as Xt,a5 as Yt,a6 as Zt,ab as He,a8 as we,a9 as Qt}from"./localforage-acab835a.js";const eo={id:"scene"},to={__name:"index",setup(u){const s=t("");function c(){s.value.appendChild(editor.canvas)}return de(()=>{}),B(()=>{Editor.on(Editor.events.EDITOR_LOADED,c)}),it(()=>{Editor.off(Editor.events.EDITOR_LOADED,c)}),(d,v)=>(o(),i("div",eo,[e("div",{class:"viewport",ref_key:"viewport",ref:s},null,512)]))}};const Ce=u=>(Z("data-v-14cee3ac"),u=u(),Q(),u),oo=Ce(()=>e("div",{class:"tips-text"},[e("p",null,"Directly drop the gltf/glb (folder or zip) or .hdr to here")],-1)),no=Ce(()=>e("div",{class:"tips-icon"},null,-1)),ao=Ce(()=>e("div",{class:"tips-text-bottom"},[e("p",null,"(Click to close this import modal)")],-1)),so=[oo,no,ao],lo={__name:"index",setup(u){const s=t(!1);function c(){const d=editor.tracer.canvas;d.addEventListener("dragenter",()=>{window.isLibraryDrag||(s.value=!0)}),d.addEventListener("dragleave",()=>{window.isLibraryDrag||(s.value=!1)}),new ft(d,d).on("drop",({files:y})=>{if(window.isLibraryDrag)return;s.value=!1,Array.from(y).find(([a,l])=>l.name.match(/\.(gltf|glb)$/))?editor.sceneListener.importGLTFModel(y):re({message:"Please drag in the Folder/Zip containing gltf/glb",center:!0,type:"error",showClose:!0,duration:5e3})})}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,c)}),(d,v)=>(o(),i("div",{class:F(["dropTipsArea",{isDroping:s.value}])},[e("div",{class:F(["tips-area",{isDroping:s.value}])},so,2)],2))}},io=N(lo,[["__scopeId","data-v-14cee3ac"]]);const We=u=>(Z("data-v-e407a208"),u=u(),Q(),u),ro=We(()=>e("span",{class:"top-menu-title"},"Import",-1)),co=We(()=>e("span",{class:"import-tips-text"},"You can directly drag the gltf/glb folder or zip to the page without clicking import button :D",-1)),uo={__name:"index",setup(u){const s=t(!0),c=t(),d=t(!1);function v(){s.value=!s.value}function y(){d.value=!0}function w(){c.value.accept=".fbx, .obj, .stl",c.value.click()}function f(){c.value.accept=".hdr, .exr",c.value.click()}function a(){}return de(()=>{c.value.addEventListener("change",l=>{const r=l.target.files[0];r.name&&editor.sceneListener.importTypeFile(r)})}),B(()=>{Editor.on(Editor.events.EDITOR_LOADED,a)}),(l,r)=>{const n=R("el-menu-item"),p=R("el-sub-menu"),m=R("el-menu"),_=R("el-dialog");return o(),i("div",{class:F(["top-left-menu-container",{"is-open":s.value}])},[b(m,{mode:"horizontal",class:"menu-content",ellipsis:!1},{default:k(()=>[b(p,{index:"1"},{title:k(()=>[ro]),default:k(()=>[b(n,{index:"1-1",onClick:y},{default:k(()=>[ne("GLTF/GLB")]),_:1}),b(n,{index:"1-2",onClick:w},{default:k(()=>[ne("FBX/OBJ/STL")]),_:1}),b(n,{index:"1-3",onClick:f},{default:k(()=>[ne("HDR/EXR")]),_:1})]),_:1})]),_:1}),e("div",{class:"menu-toggle",onClick:v}),e("input",{ref_key:"importInput",ref:c,style:{display:"none"},type:"file",class:"importInput"},null,512),b(_,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=C=>d.value=C),width:400,title:"Tips",center:""},{default:k(()=>[co]),_:1},8,["modelValue"])],2)}}},po=N(uo,[["__scopeId","data-v-e407a208"]]);const qe=u=>(Z("data-v-1f1e9af4"),u=u(),Q(),u),_o={class:"menu-content"},mo={class:"sample-count"},vo=qe(()=>e("span",{class:"item-text pre-text"},"Samples:",-1)),go={class:"item-text cur-sample-text"},fo=qe(()=>e("span",{class:"item-text split-text"},"/",-1)),ho={class:"item-text target-sample-text"},bo={__name:"index",setup(u){const s=t(),c=t(!0),d=t(0),v=t(0);function y(){c.value=!c.value}function w(){var r,n;(n=(r=s.value)==null?void 0:r.blur)==null||n.call(r)}function f(){v.value=editor.tracer.targetSampleCount,d.value=editor.tracer.sampleCount}function a(){d.value=editor.tracer.sampleCount}const l=r=>{editor.tracer.targetSampleCount=r};return B(()=>{Editor.on(Editor.events.RENDER_DRAWCALL,a),Editor.on(Editor.events.EDITOR_LOADED,f)}),(r,n)=>{const p=R("el-input");return o(),i("div",{class:F(["top-right-menu-container",{"is-open":c.value}])},[e("div",{class:"menu-toggle",onClick:n[0]||(n[0]=m=>y())}),e("ul",_o,[e("li",mo,[vo,e("span",go,D(d.value),1),fo,e("span",ho,[b(p,{ref_key:"input",ref:s,modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=m=>v.value=m),placeholder:"",max:99999,min:0,onKeydown:[rt(me(w,["prevent"]),["enter"]),n[2]||(n[2]=me(()=>{},["stop"]))],onKeyup:n[3]||(n[3]=me(()=>{},["stop"])),onChange:l},null,8,["modelValue","onKeydown"])])])])],2)}}},yo=N(bo,[["__scopeId","data-v-1f1e9af4"]]);const wo={class:"material-container"},Eo={class:"material-name"},xo={class:"material-name-text"},Co={key:0,class:"component-container"},$o={key:0,class:"component-title"},Lo={key:0,class:"component-title"},ko={key:0,class:"component-title"},Do={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu",c=t(""),d=t([]),v=t("#000000"),y=t("Metalness"),w=t(0),f=t(0),a=t(0),l=t(1.5),r=t("#000000"),n=t(1),p=t(1),m=t(.1),_=t(0),C=t(.5),S=t(0),h=t("#000000"),$=t(.05),T=t(1),z=t("#FFFFFF"),P=t(1),q=t(!0),L=ve({x:0,y:0}),{x:te,y:X}=ge(L),Ze=ve({x:0,y:0}),{x:$e,y:Le}=ge(Ze),Qe=ve({x:1,y:1}),{x:pe,y:et}=ge(Qe),ke=t(0),De=t("Repeat"),Te=t("Repeat"),tt=t([{type:"color-picker",name:"color",title:x(()=>E.global.t("color")),value:v},{type:"slider",name:"roughness",title:x(()=>E.global.t("roughness")),props:{step:.01,min:0,max:1},workflow:"Metalness",value:w},{type:"slider",name:"metalness",title:x(()=>E.global.t("metalness")),props:{step:.01,min:0,max:1},workflow:"Metalness",value:f},{type:"color-picker",name:"specularColor",title:x(()=>E.global.t("specularColor")),workflow:"Specular",value:z},{type:"slider",name:"glossiness",title:x(()=>E.global.t("glossiness")),props:{step:.01,min:0,max:1},workflow:"Specular",value:P},{type:"slider",name:"transmission",title:x(()=>E.global.t("transmission")),props:{step:.01,min:0,max:1},value:a},{type:"slider",name:"ior",title:x(()=>E.global.t("ior")),props:{step:.01,min:1,max:2.2},value:l},{type:"color-picker",name:"emissive",title:x(()=>E.global.t("emissive")),value:r},{type:"slider",name:"emissiveIntensity",title:x(()=>E.global.t("emissive intensity")),value:n,props:{step:.01,min:1,max:10}},{type:"slider",name:"alpha",title:x(()=>E.global.t("alpha")),props:{step:.01,min:0,max:1},value:T}]),ot=t([{type:"slider",name:"subsurface",title:x(()=>E.global.t("subsurface")),props:{step:.01,min:0,max:1},value:S},{type:"color-picker",name:"subsurfaceColor",title:x(()=>E.global.t("subsurface color")),value:h},{type:"slider",name:"subsurfaceMFP",title:x(()=>E.global.t("subsurface mfp")),props:{precision:3,step:.01,min:0,max:1},value:$}]),Re=t([{type:"slider",name:"clearcoat",title:x(()=>E.global.t("clearcoat")),props:{step:.01,min:0,max:1},value:p},{type:"slider",name:"clearcoatRoughness",title:x(()=>E.global.t("clearcoat roughness")),props:{step:.01,min:0,max:1},value:m},{type:"slider",name:"sheen",title:x(()=>E.global.t("sheen")),props:{step:.01,min:0,max:1},value:_},{type:"slider",name:"sheenTint",title:x(()=>E.global.t("sheen tint")),props:{step:.01,min:0,max:1},value:C}]),nt=t([{type:"input-group",name:"offset",show:!0,props:{title:x(()=>E.global.t("offset")),precision:3},value:{x:{value:te,name:"X",step:.01},y:{value:X,name:"Y",step:.01}}},{type:"input-group",name:"repeat",show:!0,props:{title:x(()=>E.global.t("repeat")),precision:3},value:{x:{value:$e,name:"X",step:.01},y:{value:Le,name:"Y",step:.01}}},{type:"input-group",name:"center",show:!0,props:{title:x(()=>E.global.t("center")),precision:3},value:{x:{value:pe,name:"X",step:.01},y:{value:et,name:"Y",step:.01}}},{type:"slider",name:"rotation",title:x(()=>E.global.t("rotation")),props:{step:1,min:0,max:360},value:ke},{type:"select",name:"wrapS",title:x(()=>E.global.t("wrapS")),props:{options:[{label:"Repeat",value:"Repeat"},{label:"ClampToEdge",value:"ClampToEdge"},{label:"MirroredRepeat",value:"MirroredRepeat"}]},value:De},{type:"select",name:"wrapT",title:x(()=>E.global.t("wrapT")),props:{options:[{label:"Repeat",value:"Repeat"},{label:"ClampToEdge",value:"ClampToEdge"},{label:"MirroredRepeat",value:"MirroredRepeat"}]},value:Te}]),at=t(s?[{title:"Subsurface",components:ot},{title:"Advanced",components:Re}]:[{title:"Advanced",components:Re}]),Me=t({title:"Texture UV Transform",components:nt}),Se={1e3:"Repeat",1001:"ClampToEdge",1002:"MirroredRepeat"};let Ie=!0;async function ce(O,g,Y){switch(O=="color"&&(v.value=g),O=="specularColor"&&(z.value=g),O=="emissive"&&(r.value=g),O=="subsurfaceColor"&&(h.value=g),O){case"color":case"specularColor":case"emissive":case"subsurfaceColor":g=ht(g);break}if(O.includes("subsurface")&&Ie){Ie=!1;const se=document.querySelector(".building-text-container .building-text"),I=document.querySelector(".building-text-container");I.classList.add("building"),se.textContent="Building...",await editor.renderListener.updateMeshMaterialParam(O,g,Y),I.classList.remove("building")}else await editor.renderListener.updateMeshMaterialParam(O,g,Y);O=="transmission"&&g>0&&editor.tracer.bounces<5&&(editor.tracer.bounces=5)}function Ve(O,g,Y){editor.renderListener.updateMeshMaterialUVTransformParam(O,g,Y)}function _e(O){const g=O.material;g.color?v.value=`#${g.color.getHexString()}`:v.value=fe(g.userData.color),w.value=g.roughness??g.userData.roughness,f.value=g.metalness??g.userData.metalness,a.value=g.transmission??g.userData.transmission,l.value=g.ior??g.userData.ior,g.emissive?r.value=`#${g.emissive.getHexString()}`:r.value=fe(g.userData.emissive),n.value=g.emissiveIntensity??g.userData.emissiveIntensity,p.value=g.clearcoat??g.userData.clearcoat,m.value=g.clearcoatRoughness??g.userData.clearcoatRoughness,_.value=g.sheen??g.userData.sheen,C.value=g.sheenTint??g.userData.sheenTint,T.value=g.opacity??g.userData.alpha,y.value=="Specular"&&(z.value=`#${g.specular.getHexString()}`,P.value=g.glossiness),S.value=g.userData.subsurface,$.value=g.userData.subsurfaceMFP,h.value=fe(g.userData.subsurfaceColor),q.value=!!g.map,Ae(O)}function Ae(O){const g=O.material;if(!g.map)return;te.value=g.map.offset.x,X.value=g.map.offset.y,$e.value=g.map.repeat.x,Le.value=g.map.repeat.y,pe.value=g.map.center.x,pe.value=g.map.center.y,ke.value=bt.radToDeg(g.map.rotation);const Y=g.map.wrapS,se=g.map.wrapT;De.value=Se[Y],Te.value=Se[se]}function st(O){if(!O||!O.material)return;const g=O.material;c.value=g.name,y.value=g.isGLTFSpecularGlossinessMaterial?"Specular":"Metalness",_e(O)}return B(()=>{Editor.on(Editor.events.OBJECT_SELECTED,st),Editor.on(Editor.events.MATERIAL_PARAM_CHANGE,_e),Editor.on(Editor.events.MATERIAL_CHANGE,_e),Editor.on(Editor.events.MATERIAL_TEXTURE_PARAM_CHANGE,Ae)}),(O,g)=>{const Y=R("el-collapse-item"),se=R("el-collapse");return o(),i("div",wo,[e("div",Eo,[ne(" Name: "),e("span",xo,D(c.value),1)]),(o(!0),i(V,null,A(tt.value,(I,le)=>(o(),i(V,{key:le},[!I.workflow||y.value==I.workflow?(o(),i("div",Co,[I.title?(o(),i("div",$o,D(I.title),1)):H("",!0),(o(),j(W(I.type),ee({class:"componet-body",modelValue:I.value,"onUpdate:modelValue":U=>I.value=U},I.props,{onChange:U=>ce(I.name,U,!0),onInput:U=>(I.type=="slider"||"color-picker")&&ce(I.name,U,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))])):H("",!0)],64))),128)),b(se,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=I=>d.value=I),class:"inner-collapse",accordion:""},{default:k(()=>[(o(!0),i(V,null,A(at.value,(I,le)=>(o(),j(Y,{title:I.title,name:le},{default:k(()=>[(o(!0),i(V,null,A(I.components,(U,lt)=>(o(),i("div",{key:lt,class:"component-container"},[U.title?(o(),i("div",Lo,D(U.title),1)):H("",!0),(o(),j(W(U.type),ee({class:"componet-body",modelValue:U.value,"onUpdate:modelValue":ie=>U.value=ie},U.props,{onChange:ie=>ce(U.name,ie,!0),onInput:ie=>(U.type=="slider"||"color-picker")&&ce(U.name,ie,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:2},1032,["title","name"]))),256)),s?G((o(),j(Y,{key:0,title:Me.value.title,name:"uv"},{default:k(()=>[(o(!0),i(V,null,A(Me.value.components,(I,le)=>(o(),i("div",{key:le,class:"component-container"},[I.title?(o(),i("div",ko,D(I.title),1)):H("",!0),(o(),j(W(I.type),ee({class:"componet-body",modelValue:I.value,"onUpdate:modelValue":U=>I.value=U},I.props,{onChange:U=>Ve(I.name,U,!0),onInput:U=>(I.type=="slider"||"input-group")&&Ve(I.name,U,!1)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1},8,["title"])),[[K,q.value]]):H("",!0)]),_:1},8,["modelValue"])])}}},To=N(Do,[["__scopeId","data-v-f4fe57d2"]]);const Ro={class:"mesh-container"},Mo={class:"header-container"},So={class:"tab-header"},Io={class:"tab-title"},Vo={class:"tab-title-text"},Ao={class:"collapse-container"},Oo={__name:"index",setup(u){const s=t(!1),c=t(""),d=t([1]),v=t({title:x(()=>E.global.t("property")),icon:"transform"});function y(w){w?(s.value=!0,w.isMesh?c.value="material":c.value=""):s.value=!1}return B(()=>{Editor.on(Editor.events.OBJECT_SELECTED,y)}),(w,f)=>{const a=R("el-empty"),l=R("el-collapse-item"),r=R("el-collapse"),n=R("el-scrollbar");return o(),i("div",Ro,[e("div",Mo,[e("div",So,[e("div",Io,[e("span",{class:F(["iconfont tab-icon","icon-"+v.value.icon])},null,2),e("span",Vo,D(v.value.title),1)])])]),G(e("div",Ao,[b(n,{class:"mesh-scrollbar",height:"100%"},{default:k(()=>[G(b(r,{modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=p=>d.value=p)},{default:k(()=>[b(l,{title:"Material",name:1},{default:k(()=>[b(To),G(b(a,{description:"No Selected Mesh"},null,512),[[K,c.value!="material"]])]),_:1})]),_:1},8,["modelValue"]),[[K,c.value=="material"]]),G(b(a,{description:"No Selected Mesh"},null,512),[[K,c.value!="material"]])]),_:1})],512),[[K,s.value]])])}}},Uo=N(Oo,[["__scopeId","data-v-44a33a6d"]]),Po={class:"setting-container"},Fo={class:"component-title"},Bo={class:"component-container"},No={class:"component-title"},Go={class:"component-container"},Ko={class:"component-title"},jo={class:"component-container"},zo={class:"component-title"},Ho={__name:"index",setup(u){const s=t(2),c=t(4),d=t(1),v=t(0),y=t("Linear"),w=t(!1),f=t("#000000"),a=t(1),l=t(!1),r=t(4),n=t("Auto"),p=t([{type:"slider",name:"downsamplingFactor",title:x(()=>E.global.t("moving downsampling")),props:{step:1,min:1,max:10},value:c},{type:"slider",name:"envMapIntensity",title:x(()=>E.global.t("env map intensity")),props:{step:.1,min:0,max:5},value:d},{type:"slider",name:"envRotation",title:x(()=>E.global.t("env rotation")),props:{step:1,min:0,max:360},value:v},{type:"el-switch",name:"enableBackgroundColor",title:x(()=>E.global.t("enable bgcolor")),props:{size:"small"},value:w},{type:"color-picker",name:"backgroundColor",title:x(()=>E.global.t("bgcolor")),value:f},{type:"slider",name:"backgroundAlpha",title:x(()=>E.global.t("background alpha")),props:{step:.01,min:0,max:1},value:a},{type:"select",name:"toneMapping",title:x(()=>E.global.t("tone mapping")),props:{options:[{label:"Linear",value:"Linear"},{label:"ACES",value:"ACES"}]},value:y}]),m=[{label:"Auto",value:"Auto"},{label:"Manual",value:"Manual"}];function _(h,$){editor.renderListener.updateTracerSetting(h,$)}function C(h){editor.setTileRenderMode(h)}function S(){const h=editor.tracer;s.value=h.bounces,c.value=h.downsamplingFactor,d.value=h.envMapIntensity,v.value=h.envRotation,y.value=h.toneMapping,w.value=h.enableBackgroundColor,f.value=h.backgroundColor.getHex(),a.value=h.backgroundAlpha,l.value=h.enableTileRender,r.value=h.tileNumber,n.value==editor.autoTile}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,S)}),(h,$)=>{const T=R("el-switch"),z=R("el-option"),P=R("el-select"),q=R("slider");return o(),i("div",Po,[(o(!0),i(V,null,A(p.value,(L,te)=>(o(),i("div",{key:te,class:"component-container"},[e("div",Fo,D(L.title),1),(o(),j(W(L.type),ee({class:"componet-body",modelValue:L.value,"onUpdate:modelValue":X=>L.value=X},L.props,{onChange:X=>_(L.name,X),onInput:X=>L.type=="slider"&&_(L.name,X)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128)),e("div",Bo,[e("div",No,D(h.$t("enable tile")),1),b(T,{class:"componet-body",onChange:$[0]||($[0]=L=>_("enableTileRender",L)),modelValue:l.value,"onUpdate:modelValue":$[1]||($[1]=L=>l.value=L),size:"small"},null,8,["modelValue"])]),e("div",Go,[e("div",Ko,D(h.$t("tile setting mode")),1),b(P,{class:"componet-body",modelValue:n.value,"onUpdate:modelValue":$[2]||($[2]=L=>n.value=L),placeholder:"Select",onChange:$[3]||($[3]=L=>C(L))},{default:k(()=>[(o(),i(V,null,A(m,L=>b(z,{key:L.value,label:L.label,value:L.value,disabled:L.disabled},{default:k(()=>[e("div",null,D(L.label),1)]),_:2},1032,["label","value","disabled"])),64))]),_:1},8,["modelValue"])]),e("div",jo,[e("div",zo,D(h.$t("tile number")),1),b(q,{class:"componet-body",onChange:$[4]||($[4]=L=>_("tileNumber",L)),onInput:$[5]||($[5]=L=>_("tileNumber",L)),disabled:n.value=="Auto",modelValue:r.value,"onUpdate:modelValue":$[6]||($[6]=L=>r.value=L),step:1,min:1,max:32},null,8,["disabled","modelValue"])])])}}},Wo={class:"camera-container"},qo={key:0,class:"component-title"},Jo={__name:"index",setup(u){const s=t("Perspective"),c=t(0),d=t(10),v=t(""),y=t(!0),w=t([{type:"select",name:"type",title:x(()=>E.global.t("type")),props:{options:[{label:"Perspective",value:"Perspective"},{label:"Orthographic",value:"Orthographic"}]},value:s},{type:"select",name:"viewAngle",title:x(()=>E.global.t("view angle")),props:{options:[{label:"Front",value:"Front"},{label:"Back",value:"Back"},{label:"Right",value:"Right"},{label:"Left",value:"Left"},{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"}]},value:v},{type:"el-switch",name:"autoFocus",title:x(()=>E.global.t("autoFocus")),props:{size:"small"},value:y},{type:"slider",name:"aperture",title:x(()=>E.global.t("aperture")),props:{step:.001,min:0,max:1},value:c},{type:"slider",name:"focus",title:x(()=>E.global.t("focus")),props:{step:.1,min:.1,max:100},value:d}]);function f(n,p){editor.renderListener.updateCameraSetting(n,p)}function a(){const n=editor.camera,p=n.isPerspectiveCamera?"Perspective":"Orthographic";s.value=p,c.value=n.aperture,d.value=n.focus,y.value=editor.renderListener.enableRightClickFocus}function l(n){let p="",m="";switch(n.name){case"refocus":editor.renderListener.autoFitCameraByModel();break;case"switchCamera":let C=s.value=="Perspective"?"Orthographic":"Perspective";editor.switchCamera(C),s.value=C;break;case"viewAngleFront":switch(m=n.oriEvent.key,m){case"1":p="Front";break;case"2":p="Right";break;case"3":p="Top";break}v.value=p,editor.renderListener.setCameraViewAngle(p);break;case"viewAngleBack":switch(m=n.oriEvent.key,m){case"4":p="Back";break;case"5":p="Left";break;case"6":p="Bottom";break}v.value=p,editor.renderListener.setCameraViewAngle(p);break}}function r(){const n=editor.camera;d.value=n.focus}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,a),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,l),Editor.on(Editor.events.CAMERA_PARAM_CHANGE,r)}),(n,p)=>(o(),i("div",Wo,[(o(!0),i(V,null,A(w.value,(m,_)=>(o(),i("div",{key:_,class:"component-container"},[m.title?(o(),i("div",qo,D(m.title),1)):H("",!0),(o(),j(W(m.type),ee({class:"componet-body",modelValue:m.value,"onUpdate:modelValue":C=>m.value=C},m.props,{onChange:C=>f(m.name,C),onInput:C=>m.type=="slider"&&f(m.name,C)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]))}},Xo={class:"postprocessing-container"},Yo={key:0,class:"component-title"},Zo={key:0,class:"component-title"},Qo={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu",c=t([1]),d=t(!1),v=t(.8),y=t(.1),w=t(1),f=t(.5),a=t(!1),l=t(.5),r=t(.5),n=t([{type:"el-switch",name:"enabled",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:d},{type:"slider",name:"threshold",title:x(()=>E.global.t("threshold")),props:{step:.01,min:0,max:1},value:v},{type:"slider",name:"smooth",title:x(()=>E.global.t("smooth")),props:{step:.001,min:0,max:.5},value:y},{type:"slider",name:"radius",title:x(()=>E.global.t("radius")),props:{step:.01,min:0,max:2},value:f},{type:"slider",name:"strength",title:x(()=>E.global.t("strength")),props:{step:.01,min:0,max:5},value:w}]),p=t([{type:"el-switch",name:"enabled",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:a},{type:"slider",name:"offset",title:x(()=>E.global.t("offset")),props:{step:.01,min:0,max:1},value:l},{type:"slider",name:"darkness",title:x(()=>E.global.t("darkness")),props:{step:.01,min:0,max:1},value:r}]);function m(C,S,h){editor.renderListener.updatePostProcessingSetting(C,S,h)}function _(){const C=editor.renderListener.composer.bloomPass;d.value=C.enabled,v.value=C.threshold,y.value=C.smooth,w.value=C.strength,s&&(f.value=C.radius);const S=editor.renderListener.composer.vignettePass;a.value=S.enabled,l.value=S.offset,r.value=S.darkness}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,_)}),(C,S)=>{const h=R("el-collapse-item"),$=R("el-collapse");return o(),i("div",Xo,[b($,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=T=>c.value=T),class:"inner-collapse"},{default:k(()=>[b(h,{title:"Bloom",name:1},{default:k(()=>[(o(!0),i(V,null,A(n.value,(T,z)=>(o(),i("div",{key:z,class:"component-container"},[T.title?(o(),i("div",Yo,D(T.title),1)):H("",!0),(o(),j(W(T.type),ee({class:"componet-body",modelValue:T.value,"onUpdate:modelValue":P=>T.value=P},T.props,{onChange:P=>m("bloom",T.name,P),onInput:P=>T.type=="slider"&&m("bloom",T.name,P)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1}),b(h,{title:"Vignette",name:2},{default:k(()=>[(o(!0),i(V,null,A(p.value,(T,z)=>(o(),i("div",{key:z,class:"component-container"},[T.title?(o(),i("div",Zo,D(T.title),1)):H("",!0),(o(),j(W(T.type),ee({class:"componet-body",modelValue:T.value,"onUpdate:modelValue":P=>T.value=P},T.props,{onChange:P=>m("vignette",T.name,P),onInput:P=>T.type=="slider"&&m("vignette",T.name,P)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]),_:1})]),_:1},8,["modelValue"])])}}},en={class:"denoise-container"},tn={key:0,class:"component-title"},on={__name:"index",setup(u){const s=t(!1),c=t(0),d=t(0),v=t(0),y=t([{type:"el-switch",name:"enableDenoise",title:x(()=>E.global.t("enabled")),props:{size:"small"},value:s},{type:"slider",name:"denoiseColorFactor",title:x(()=>E.global.t("color factor")),props:{step:1e-4,min:0,max:1.5},value:c},{type:"slider",name:"denoiseNormalFactor",title:x(()=>E.global.t("normal factor")),props:{step:1e-4,min:0,max:1.5},value:d},{type:"slider",name:"denoisePositionFactor",title:x(()=>E.global.t("position factor")),props:{step:1e-4,min:0,max:1.5},value:v}]);function w(a,l){editor.renderListener.updateDenoiseSetting(a,l)}function f(){const a=editor.tracer;s.value=a.enableDenoise,c.value=a.denoiseColorFactor,d.value=a.denoiseNormalFactor,v.value=a.denoisePositionFactor}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,f)}),(a,l)=>(o(),i("div",en,[(o(!0),i(V,null,A(y.value,(r,n)=>(o(),i("div",{key:n,class:"component-container"},[r.title?(o(),i("div",tn,D(r.title),1)):H("",!0),(o(),j(W(r.type),ee({class:"componet-body",modelValue:r.value,"onUpdate:modelValue":p=>r.value=p},r.props,{onChange:p=>w(r.name,p),onInput:p=>r.type=="slider"&&w(r.name,p)}),null,16,["modelValue","onUpdate:modelValue","onChange","onInput"]))]))),128))]))}};const nn={class:"render-container"},an={class:"header-container"},sn={class:"tab-header"},ln={class:"tab-title"},rn={class:"tab-title-text"},cn={class:"collapse-container"},dn={__name:"index",setup(u){const s=t([1]),c=t({title:x(()=>E.global.t("render")),icon:"render"});return(d,v)=>{const y=R("el-collapse-item"),w=R("el-collapse"),f=R("el-scrollbar");return o(),i("div",nn,[e("div",an,[e("div",sn,[e("div",ln,[e("span",{class:F(["iconfont tab-icon","icon-"+c.value.icon])},null,2),e("span",rn,D(c.value.title),1)])])]),e("div",cn,[b(f,{class:"mesh-scrollbar",height:"100%"},{default:k(()=>[b(w,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=a=>s.value=a),accordion:""},{default:k(()=>[b(y,{title:"Setting",name:1},{default:k(()=>[b(Ho)]),_:1}),b(y,{title:"Denoise",name:2},{default:k(()=>[b(on)]),_:1}),b(y,{title:"Camera",name:3},{default:k(()=>[b(Jo)]),_:1}),b(y,{title:"PostProcessing",name:4},{default:k(()=>[b(Qo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])}}},un=N(dn,[["__scopeId","data-v-89efe350"]]);const pn=u=>(Z("data-v-48c88c53"),u=u(),Q(),u),_n={class:"material-library-list"},mn={class:"list-container"},vn={class:"material-group-title"},gn={class:"material-library-list"},fn={class:"item-image-container"},hn=["draggable","onDragstart"],bn=["onClick"],yn={class:"file-size"},wn=pn(()=>e("div",{class:"iconfont icon-download item-download-icon"},null,-1)),En={class:"item-title"},xn={__name:"index",setup(u){const s=new ue().setResponseType("blob"),c=t([{title:"Floor / Wood / Marble / Stone",list:Oe},{title:"Metal",list:Ue},{title:"Fabric / Leather / Pattern",list:Pe}]),d=t([...Pe,...Oe,...Ue]);function v(){d.value.forEach(a=>{const l=a.texturesURL,r=Object.keys(l);localforage.getItem(`material-${a.type}-${a.name}-${r[0]}`).then(n=>{n&&(a.downloaded=!0)})})}v();function y(a){if(a.isDownloading)return;a.isDownloading=!0;const l=a.texturesURL,r=Object.keys(l),n=r.length;let p=0;r.map(m=>{const _=l[m];s.load(_,C=>{localforage.setItem(`material-${a.type}-${a.name}-${m}`,C).then(S=>{p++,a.progress=Math.round(p/n*100),p==n&&(a.downloaded=!0,a.isDownloading=!1)})})})}function w(a,l){if(!a.downloaded)return;window.isLibraryDrag=!0;const r=a.texturesURL,n=Object.keys(r),p=[];n.map(_=>{p.push(`material-${a.type}-${a.name}-${_}`)});const m=JSON.stringify({type:"material",itemType:a.type,cacheKey:JSON.stringify(p),textureKey:JSON.stringify(n)});l.dataTransfer.setData("transData",m)}function f(){window.isLibraryDrag=!1}return(a,l)=>{const r=R("el-progress");return o(),i("div",_n,[(o(!0),i(V,null,A(c.value,(n,p)=>(o(),i("div",mn,[e("div",vn,D(n.title),1),e("div",gn,[(o(!0),i(V,null,A(n.list,(m,_)=>(o(),i("div",{key:_,class:F(["list-item-container",m.downloaded?"downloaded":"no-downloaded"])},[e("div",fn,[e("div",{class:"item-image",draggable:m.downloaded,onDragstart:C=>w(m,C),onDragend:f,style:xe({"background-image":`url(${m.previewURL})`})},null,44,hn),m.downloaded?H("",!0):(o(),i("div",{key:0,class:"download-mask-container",onClick:C=>y(m)},[G(b(r,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:m.progress},null,8,["percentage"]),[[K,m.progress!=0]]),e("span",yn,D(m.fileSize),1),wn],8,bn))]),e("div",En,D(m.name),1)],2))),128))])]))),256))])}}},Cn=N(xn,[["__scopeId","data-v-48c88c53"]]);const $n=u=>(Z("data-v-a5234a73"),u=u(),Q(),u),Ln={class:"envmap-library-list"},kn={class:"item-image-container"},Dn=["draggable","onDragstart"],Tn=["onClick"],Rn={class:"file-size"},Mn=$n(()=>e("span",{class:"iconfont icon-download item-download-icon"},null,-1)),Sn={class:"item-title"},In={__name:"index",setup(u){const s=new ue().setResponseType("blob"),c=t(ze);function d(){c.value.forEach(a=>{localforage.getItem(`envMap-${a.type}-${a.name}`).then(l=>{l&&(a.downloaded=!0)})})}d();function v(a){a.isDownloading||(a.isDownloading=!0,s.load(a.sourceURL,l=>{localforage.setItem(`envMap-${a.type}-${a.name}`,l).then(r=>{a.downloaded=!0,a.isDownloading=!1})},l=>{const r=Math.round(l.loaded/l.total*100);a.progress=r}))}function y(a,l){if(!a.downloaded)return;window.isLibraryDrag=!0;const r=JSON.stringify({type:"envMap",itemType:a.type,cacheKey:`envMap-${a.type}-${a.name}`});l.dataTransfer.setData("transData",r)}function w(){window.isLibraryDrag=!1}function f(){d()}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,f)}),(a,l)=>{const r=R("el-progress");return o(),i("div",Ln,[(o(!0),i(V,null,A(c.value,(n,p)=>(o(),i("div",{key:p,class:F(["list-item-container",n.downloaded?"downloaded":"no-downloaded"])},[e("div",kn,[e("div",{class:"item-image",draggable:n.downloaded,onDragstart:m=>y(n,m),onDragend:w,style:xe({"background-image":`url(${n.previewURL})`})},null,44,Dn),n.downloaded?H("",!0):(o(),i("div",{key:0,class:"download-mask-container",onClick:m=>v(n)},[G(b(r,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:n.progress},null,8,["percentage"]),[[K,n.progress!=0]]),e("span",Rn,D(n.fileSize),1),Mn],8,Tn))]),e("div",Sn,D(n.name),1)],2))),128))])}}},Ge=N(In,[["__scopeId","data-v-a5234a73"]]);const Vn=u=>(Z("data-v-1cc54ed4"),u=u(),Q(),u),An={class:"model-library-container"},On={class:"list-container"},Un={class:"model-group-title"},Pn={class:"model-library-list"},Fn={class:"item-image-container"},Bn=["draggable","onDragstart"],Nn=["onClick"],Gn={class:"file-size"},Kn=Vn(()=>e("div",{class:"iconfont icon-download item-download-icon"},null,-1)),jn={class:"item-title"},zn={__name:"index",setup(u){const s=new ue().setResponseType("blob"),c=t([{title:"Classic",list:ye},{title:"Basic",list:Fe},{title:"Sketchfab",list:Be},{title:"Detail",list:Ne}]),d=t([...ye,...Be,...Fe,...Ne]);function v(){d.value.forEach(l=>{localforage.getItem(`model-${l.type}-${l.name}`).then(r=>{r&&(l.downloaded=!0)})})}v();async function y(l){if(l.isDownloading)return;const r=`model-${l.type}-${l.name}`;if(await localforage.getItem(r)){l.downloaded=!0;return}else{l.isDownloading=!0;const p=await s.loadAsync(l.sourceURL,m=>{const _=Math.round(m.loaded/m.total*100);l.progress=_});await localforage.setItem(`model-${l.type}-${l.name}`,p),l.downloaded=!0,l.isDownloading=!1}}function w(l,r){if(!l.downloaded)return;window.isLibraryDrag=!0;const n=JSON.stringify({type:"model",itemType:l.type,cacheKey:`model-${l.type}-${l.name}`});r.dataTransfer.setData("transData",n)}function f(){window.isLibraryDrag=!1}function a(){v()}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,a)}),(l,r)=>{const n=R("el-progress");return o(),i("div",An,[(o(!0),i(V,null,A(c.value,(p,m)=>(o(),i("div",On,[e("div",Un,D(p.title),1),e("div",Pn,[(o(!0),i(V,null,A(p.list,(_,C)=>(o(),i("div",{key:C,class:F(["list-item-container",_.downloaded?"downloaded":"no-downloaded"])},[e("div",Fn,[e("div",{class:"item-image",draggable:_.downloaded,onDragstart:S=>w(_,S),onDragend:f,style:xe({"background-image":`url(${_.previewURL})`})},null,44,Bn),_.downloaded?H("",!0):(o(),i("div",{key:0,class:"download-mask-container",onClick:S=>y(_)},[G(b(n,{color:"#409eff",class:"download-progress",type:"circle",width:50,percentage:_.progress},null,8,["percentage"]),[[K,_.progress!=0]]),e("span",Gn,D(_.fileSize),1),Kn],8,Nn))]),e("div",jn,D(_.name),1)],2))),128))])]))),256))])}}},Ke=N(zn,[["__scopeId","data-v-1cc54ed4"]]);const Je=u=>(Z("data-v-99e1826d"),u=u(),Q(),u),Hn={class:"library-container"},Wn={class:"header-container"},qn={class:"tab-header"},Jn={class:"tab-title"},Xn={class:"tab-title-text"},Yn={class:"library-tabs-container"},Zn={class:"library-tabs-header"},Qn=["onClick"],ea={class:"library-tabs-content-container"},ta={class:"tips"},oa=Je(()=>e("span",{class:"tips-text"},[ne("Download then "),e("b",null,"Drag"),ne(" to scene")],-1)),na=Je(()=>e("a",{href:"/credit/index.html",target:"_blank"},[e("span",{class:"credit-text"},"(Credit List)")],-1)),aa={__name:"index",setup(u){const s=new yt,c=LGL_BACKEND=="webgpu";let d=!1;const v=t({title:x(()=>E.global.t("library")),icon:"library"}),y=t(c?[{name:"Model",component:J(Ke)},{name:"EnvMap",component:J(Ge)},{name:"Material",component:J(Cn)}]:[{name:"Model",component:J(Ke)},{name:"EnvMap",component:J(Ge)}]),w=t("Model");function f(r){w.value!=r&&(w.value=r)}function a(){const r=editor.tracer.canvas;r.addEventListener("dragenter",n=>{n.preventDefault()}),r.addEventListener("dragover",n=>{n.preventDefault()}),r.addEventListener("drop",n=>{if(!window.isLibraryDrag)return;let p=n.dataTransfer.getData("transData");if(!p){re({message:"Failed to read drag object data. Please try again from library",center:!0,type:"warning",showClose:!0,duration:3e3});return}if(d){re({message:"Processing the previous model, please wait",center:!0,type:"warning",showClose:!0,duration:3e3});return}d=!0,p=JSON.parse(p);const{type:m,cacheKey:_,itemType:C}=p;if(m=="model"||m=="envMap")localforage.getItem(_).then(S=>{let h=LGL_URLCacheMap.get(_);switch(h||(h=URL.createObjectURL(S),LGL_URLCacheMap.set(_,h)),m){case"model":editor.sceneListener.loadGLTFModel(h).then(()=>{d=!1});break;case"envMap":editor.sceneListener.loadEnvMap(h).then(()=>{d=!1});break}});else if(m=="material"){const S=JSON.parse(_),h=[],$=JSON.parse(p.textureKey);S.forEach((T,z)=>{localforage.getItem(T).then(P=>{let q=LGL_URLCacheMap.get(T);q||(q=URL.createObjectURL(P),LGL_URLCacheMap.set(_,q)),h.push(new Promise(L=>{s.load(q,L)})),z==S.length-1&&l(n,C,h,$)})})}})}function l(r,n,p,m){const _=new wt;switch(_.roughness=1,n){case"floor":_.metalness=0;break;case"metal":_.metalness=1;break}return Promise.all(p).then(C=>{C.forEach((h,$)=>{const T=m[$];_[T]=h}),r.clientX,r.clientY;const S=editor.pickMesh(r);editor.sceneListener.updateMeshMaterial(S,_),d=!1})}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,a)}),(r,n)=>{const p=R("el-scrollbar"),m=R("el-alert");return o(),i("div",Hn,[e("div",Wn,[e("div",qn,[e("div",Jn,[e("span",{class:F(["iconfont tab-icon","icon-"+v.value.icon])},null,2),e("span",Xn,D(v.value.title),1)])])]),e("div",Yn,[e("div",Zn,[(o(!0),i(V,null,A(y.value,_=>(o(),i("div",{key:_.name,class:F(["library-tab-box",{"is-active":_.name==w.value}]),onClick:C=>f(_.name)},[e("span",null,D(_.name),1)],10,Qn))),128))]),e("div",ea,[b(p,{class:"library-scrollbar",height:"100%"},{default:k(()=>[(o(!0),i(V,null,A(y.value,(_,C)=>G((o(),i("div",{key:_.name,class:"library-tab-content"},[(o(),j(W(_.component)))],512)),[[K,_.name==w.value]])),128))]),_:1})])]),e("div",ta,[b(m,{type:"info","show-icon":""},{title:k(()=>[oa,na]),_:1})])])}}},sa=N(aa,[["__scopeId","data-v-99e1826d"]]);const la={class:"tabs-container"},ia=["onClick"],ra={class:"panel-container"},ca={__name:"index",setup(u){const s=t(!0),c=t("Property"),d=t([{name:"Property",icon:"title-setting",component:J(Uo)},{name:"Render",icon:"title-render",component:J(un)},{name:"Library",icon:"title-render",component:J(sa)}]);function v(){}function y(f){c.value==f?s.value=!s.value:(s.value||(s.value=!0),c.value=f)}function w(f){if(f.name=="toggleMenu"){const a=f.targetStatus;s.value=a}}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,v),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,w)}),(f,a)=>(o(),i("div",{class:F(["right-drawer",{open:s.value}])},[e("div",la,[(o(!0),i(V,null,A(d.value,l=>(o(),i("div",{key:l.name,class:F(["tab-box",{"is-active":l.name==c.value}]),onClick:r=>y(l.name)},[e("span",null,D(l.name),1)],10,ia))),128))]),e("div",ra,[(o(!0),i(V,null,A(d.value,(l,r)=>G((o(),i("div",{key:l.name,class:"tab-content-container"},[(o(),j(W(l.component)))],512)),[[K,l.name==c.value]])),128))])],2))}},da=N(ca,[["__scopeId","data-v-c377a282"]]);const ua={class:"tree-container"},pa={class:"tree-header"},_a={class:"tab-title"},ma={class:"tab-title-text"},va={class:"tree-operation"},ga=["onClick"],fa={class:"tree-filter"},ha={class:"tree-body"},ba={class:"custom-tree-node"},ya={class:"node-text"},wa={__name:"index",setup(u){const s=t([]),c=t(""),d=t(),v=t(!0),y=t(!0),w=t({title:x(()=>E.global.t("outliner")),icon:"outliner"}),f=[{icon:"fold",event:"unexpandTree",toolTipText:"fold all"},{icon:"unfold",event:"expandTree",toolTipText:"unfold all"}];ct(c,h=>{d.value&&d.value.filter(h)});const a=(h,$)=>h?$.name?$.name.toLowerCase().indexOf(h.toLowerCase())!==-1:!1:!0;function l(h){switch(h){case"expandTree":n(!0);break;case"unexpandTree":n(!1);break}}function r(h,$){if(h.isObject3D){const T=dt(h);editor.select(T)}}function n(h){y.value=!1,v.value=h,ut(()=>{y.value=!0})}function p(){return editor.scene.children.filter(h=>h.name!="LGL_TRANSFORM_PIVOT")}function m(){s.value=p()}function _(){s.value=[...p()],n(!0)}function C(h){_()}function S(h){if(!h){d.value.setCurrentKey(null);return}const $=h.uuid;d.value.setCurrentKey($)}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,m),Editor.on(Editor.events.OBJECT_SELECTED,S),Editor.on(Editor.events.OBJECT_ADD,C)}),(h,$)=>{const T=R("el-tooltip"),z=R("el-input"),P=R("el-tree"),q=R("el-scrollbar");return o(),i("div",ua,[e("div",pa,[e("div",_a,[e("span",{class:F(["iconfont tab-icon","icon-"+w.value.icon])},null,2),e("span",ma,D(w.value.title),1),e("div",va,[(o(),i(V,null,A(f,(L,te)=>b(T,{key:te,effect:"light",content:L.toolTipText,placement:"top",offset:10},{default:k(()=>[e("span",{class:F(["iconfont tree-operation-icon","icon-"+L.icon]),onClick:X=>l(L.event)},null,10,ga)]),_:2},1032,["content"])),64))])])]),e("div",fa,[b(z,{modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=L=>c.value=L),placeholder:"Filter keyword"},null,8,["modelValue"])]),e("div",ha,[b(q,{height:"100%"},{default:k(()=>[y.value?(o(),j(P,{key:0,ref_key:"treeRef",ref:d,data:s.value,"node-key":"uuid","auto-expand-parent":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":a,props:{label:"name"},indent:6,onNodeClick:r,"empty-text":"No Data","default-expand-all":v.value},{default:k(({node:L,data:te})=>[e("span",ba,[e("span",ya,D(L.label),1)])]),_:1},8,["data","default-expand-all"])):H("",!0)]),_:1})])])}}},Ea=N(wa,[["__scopeId","data-v-e88e0042"]]);const xa={class:"tabs-container"},Ca=["onClick"],$a={class:"panel-container"},La={__name:"index",setup(u){const s=t(!0),c=t("Outliner"),d=t([{name:"Outliner",icon:"title-layer",component:J(Ea)}]);function v(){}function y(f){c.value==f?s.value=!s.value:(s.value||(s.value=!0),c.value=f)}function w(f){if(f.name=="toggleMenu"){const a=f.targetStatus;s.value=a}}return B(()=>{Editor.on(Editor.events.EDITOR_LOADED,v),Editor.on(Editor.events.SHORTCUT_COMMAND_UP,w)}),(f,a)=>(o(),i("div",{class:F(["left-drawer",{open:s.value}])},[e("div",xa,[(o(!0),i(V,null,A(d.value,l=>(o(),i("div",{key:l.name,class:F(["tab-box",{"is-active":l.name==c.value}]),onClick:r=>y(l.name)},[e("span",null,D(l.name),1)],10,Ca))),128))]),e("div",$a,[(o(!0),i(V,null,A(d.value,(l,r)=>G((o(),i("div",{key:l.name,class:"tab-content-container"},[(o(),j(W(l.component)))],512)),[[K,l.name==c.value]])),128))])],2))}},ka=N(La,[["__scopeId","data-v-044fd8ba"]]);const ae=u=>(Z("data-v-7ea2a590"),u=u(),Q(),u),Da={class:"bottom-right-menu-container"},Ta={class:"sponsor-content-container"},Ra=ae(()=>e("div",{class:"sponsor-title-text"},[e("p",null,"LGLTracer is my personal project."),e("p",null,"I have always been pursuing better rendering effects on the Web."),e("p",{class:"sponsor-split"}),e("p",null,"If my project/tool is helpful to you"),e("p",null,"please sponsor me to encourage me to continue development, thanks!")],-1)),Ma={class:"sponsor-button-container"},Sa={class:"wechat-pay"},Ia=ae(()=>e("span",{class:"iconfont icon-wechat sponsor-icon"},null,-1)),Va=ae(()=>e("span",{class:"split-line"},"/",-1)),Aa={class:"alipay-pay"},Oa=ae(()=>e("span",{class:"iconfont icon-alipay sponsor-icon"},null,-1)),Ua={href:"https://www.patreon.com/LGLTracer",target:"_blank"},Pa={class:"sponsor-button-container"},Fa=ae(()=>e("span",{class:"iconfont icon-patreon sponsor-icon"},null,-1)),Ba=ae(()=>e("span",null,"Patreon",-1)),Na={class:"qrcode-container"},Ga={class:"qrcode-tabs-header"},Ka=["onClick"],ja={class:"qrcode-tabs-content-container"},za=["src"],Ha=ae(()=>e("div",{class:"sponsor-tips"},"赞助可留言微信号，进交流群参与交流",-1)),Wa={class:"menu-content"},qa={class:"tile-fps-count"},Ja={class:"item-text cur-tile-text"},Xa={class:"item-text cur-fps-text"},Ya={__name:"index",setup(u){const s=t(!0),c=t(0),d=t(0);function v(){s.value=!s.value}const y=t(!1),w=t(0),f=t("wechat"),a=t([{name:"wechat",qrCodeURL:"/images/wechat.jpg"},{name:"alipay",qrCodeURL:"/images/alipay.jpg"}]);function l(){w.value=1}function r(_){f.value!=_&&(f.value=_)}function n(){w.value=0}function p(_){const{fps:C}=_;c.value=editor.tracer.tileNumber,d.value=C}function m(){c.value=editor.tracer.tileNumber}return B(()=>{Editor.on(Editor.events.COMMAND_TILE_FPS,p),Editor.on(Editor.events.EDITOR_LOADED,m)}),(_,C)=>{const S=R("el-button"),h=R("el-dialog");return o(),i("div",Da,[e("div",{class:"sponsor-text",onClick:C[0]||(C[0]=$=>y.value=!0)},"Sponsor"),b(h,{modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=$=>y.value=$),width:320,"show-close":"","close-on-click-modal":!1,onClosed:n},{footer:k(()=>[]),default:k(()=>[G(e("div",Ta,[Ra,e("div",Ma,[b(S,{color:"#2680c7",onClick:l,class:"sponsor-button"},{default:k(()=>[e("span",Sa,[Ia,e("span",null,D(_.$t("wechat")),1)]),Va,e("span",Aa,[Oa,e("span",null,D(_.$t("alipay")),1)])]),_:1})]),e("a",Ua,[e("div",Pa,[b(S,{color:"#333333",class:"sponsor-button"},{default:k(()=>[Fa,Ba]),_:1})])])],512),[[K,w.value==0]]),G(e("div",Na,[e("div",Ga,[(o(!0),i(V,null,A(a.value,$=>(o(),i("div",{key:$.name,class:F(["qrcode-tab-box",{"is-active":$.name==f.value}]),onClick:T=>r($.name)},[e("span",null,D(_.$t($.name)),1)],10,Ka))),128))]),e("div",ja,[(o(!0),i(V,null,A(a.value,($,T)=>G((o(),i("div",{key:$.name,class:"qrcode-tab-content"},[e("img",{class:"qrcode-image",src:$.qrCodeURL,alt:"",draggable:!1},null,8,za)],512)),[[K,$.name==f.value]])),128)),Ha])],512),[[K,w.value==1]]),G(e("div",{onClick:n,class:"back-button iconfont icon-return"},null,512),[[K,w.value==1]])]),_:1},8,["modelValue"]),e("div",{class:F(["tile-fps-container",{"is-open":s.value}])},[e("div",{class:"menu-toggle",onClick:C[2]||(C[2]=$=>v())}),e("ul",Wa,[e("li",qa,[e("span",Ja,D(c.value)+" Tiles",1),e("span",Xa,D(d.value)+" FPS",1)])])],2)])}}},Za=N(Ya,[["__scopeId","data-v-7ea2a590"]]);const Qa={class:"info-container"},es={class:"title"},ts={class:"text"},os={__name:"index",setup(u){const s=LGL_BACKEND=="webgpu"?"WebGPU":"WebGL",c=t(""),d=t(""),v=t(""),y=t([{title:"Graphics API",value:s},{title:"Browser",value:c},{title:"OS",value:d},{title:"GPU",value:v},{title:"LGLTracer Version",value:Et},{title:"Viewer Version",value:xt}]);return de(()=>{const{browser:w,os:f,graphicsCard:a}=Ct();c.value=w,d.value=f,a&&(v.value=a.renderer)}),(w,f)=>(o(),i("div",Qa,[(o(!0),i(V,null,A(y.value,a=>(o(),i("div",{class:"info-row",key:a.title},[e("div",es,D(a.title)+": ",1),e("div",ts,D(a.value),1)]))),128))]))}},ns=N(os,[["__scopeId","data-v-7545ca4a"]]);const as={class:"info-container"},ss={__name:"index",setup(u){const s=[{operation:"Switch Camera Projection",keyCode:"P , 0"},{operation:"View(Front/Right/Top)",keyCode:"1 / 2 / 3"},{operation:"View(Back/Left/Bottom)",keyCode:"4 / 5 / 6"},{operation:"Play/Pause Rendering",keyCode:"Space"},{operation:"Refocus current scene",keyCode:"F"},{operation:"Toggle left/right panel",keyCode:"T"}];return(c,d)=>{const v=R("el-table-column"),y=R("el-table");return o(),i("div",as,[b(y,{data:s,stripe:"",style:{width:"100%"}},{default:k(()=>[b(v,{prop:"operation",label:"Operation"}),b(v,{prop:"keyCode",label:"KeyCode"})]),_:1})])}}},ls=N(ss,[["__scopeId","data-v-2a14224d"]]);const is=u=>(Z("data-v-ada81a5f"),u=u(),Q(),u),rs={class:"bottom-left-menu-container"},cs={class:"button-container"},ds={class:"helper-container"},us={class:"helper-tabs-header"},ps=["onClick"],_s={class:"helper-tabs-content-container"},ms=is(()=>e("div",{class:"contact-footer"},[ne("Any questions? Contact me :D "),e("a",{href:"mailto:lg2lugang@gmail.com",target:"_blank"},[e("i",{class:"contact-icon iconfont icon-email"})]),e("a",{href:"https://twitter.com/WebAMV",target:"_blank"},[e("span",{class:"contact-icon iconfont icon-twiter"})])],-1)),vs={__name:"index",setup(u){const s=t(!1),c=t("info"),d=t([{name:"info",component:J(ns)},{name:"shortcut",component:J(ls)}]);function v(f){c.value!=f&&(c.value=f)}function y(){editor.renderListener.getScreenshot()}function w(){editor.renderListener.autoFitCameraByModel()}return(f,a)=>{const l=R("el-tooltip"),r=R("el-dialog");return o(),i("div",rs,[e("div",cs,[e("div",{class:"button helper-button iconfont icon-help",onClick:a[0]||(a[0]=n=>s.value=!0)}),b(l,{effect:"light",content:"screenshot",placement:"top",offset:10},{default:k(()=>[e("div",{onClick:y,class:"button camera-button iconfont icon-camera"})]),_:1}),b(r,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=n=>s.value=n),width:380,"show-close":"","close-on-click-modal":!1},{footer:k(()=>[ms]),default:k(()=>[e("div",ds,[e("div",us,[(o(!0),i(V,null,A(d.value,n=>(o(),i("div",{key:n.name,class:F(["helper-tab-box",{"is-active":n.name==c.value}]),onClick:p=>v(n.name)},[e("span",null,D(f.$t(n.name)),1)],10,ps))),128))]),e("div",_s,[(o(!0),i(V,null,A(d.value,(n,p)=>G((o(),i("div",{key:n.name,class:"helper-tab-content"},[(o(),j(W(n.component)))],512)),[[K,n.name==c.value]])),128))])])]),_:1},8,["modelValue"]),b(l,{effect:"light",content:"refocus(F)",placement:"top",offset:10},{default:k(()=>[e("div",{onClick:w,class:"button camera-button iconfont icon-focus"})]),_:1})])])}}},gs=N(vs,[["__scopeId","data-v-ada81a5f"]]),fs={class:"scene-container"},hs={__name:"App",setup(u){return de(()=>{}),(s,c)=>(o(),i("div",fs,[b(to),b(po),b(yo),b(ka),b(da),b(gs),b(Za),b(io)]))}},M=pt(hs);M.use(E);M.component("ElTree",$t);M.component("ElInput",Lt);M.component("ElTabs",kt);M.component("ElTabPane",Dt);M.component("ElScrollbar",_t);M.component("ElTooltip",mt);M.component("ElForm",Tt);M.component("ElFormItem",Rt);M.component("ElCollapse",Mt);M.component("ElCollapseItem",St);M.component("ElSlider",It);M.component("ElSelect",Vt);M.component("ElOption",At);M.component("ElSwitch",Ot);M.component("ElMenu",Ut);M.component("ElMenuItem",Pt);M.component("ElSubMenu",Ft);M.component("ElEmpty",Bt);M.component("ElDialog",Nt);M.component("ElButton",Gt);M.component("ElTimeline",Kt);M.component("ElTimelineItem",jt);M.component("ElProgress",zt);M.component("ElTable",vt);M.component("ElTableColumn",gt);M.component("ElAlert",Ht);M.component("InputNumber",Wt);M.component("InputGroup",qt);M.component("ColorPicker",Jt);M.component("Slider",Xt);M.component("Select",Yt);!navigator.gpu||!navigator.gpu.getPreferredCanvasFormat?(window.LGL_BACKEND="webgl",document.body.classList.add("webgl")):window.LGL_BACKEND="webgpu";window.LGL_BACKEND=="webgl"&&Zt({title:"Warning",message:`Your device/browser does not support WebGPU!
			It has fallen back to the WebGL version,
			many functions/features will be limited!`,type:"warning",duration:0});window.Editor=He;const oe=new He(window.LGL_BACKEND);window.editor=oe;window.localforage=we;const Ee=new Map;window.LGL_URLCacheMap=Ee;const bs=new ue().setResponseType("blob"),ys=console.error,ws=console.warn;console.error=function(...s){const c=s[0];re({message:c,center:!0,type:"error",showClose:!0,duration:5e3}),ys.apply(console,s)};console.warn=function(...s){const c=s[0];re({message:c,center:!0,type:"warning",showClose:!0,duration:3500}),ws.apply(console,s)};function Xe(){const u=window.innerWidth,s=window.innerHeight;oe.setSize(u,s)}window.addEventListener("resize",Qt(Xe,100));const he=ye[1],be=ze[0];async function je(u,s){const c=await we.getItem(u);if(c){let d=Ee.get(u);return d||(d=URL.createObjectURL(c)),d}else{const d=await bs.loadAsync(s);await we.setItem(u,d);const v=URL.createObjectURL(d);return Ee.set(u,v),v}}const Es=document.querySelector(".entry-loading .progress-text"),xs=document.querySelector(".entry-loading .progress-line");function Cs(u){const s=Math.round(u*100);Es.textContent=`${s}%`,xs.style.width=`${s}%`}const $s=document.querySelector(".building-text-container .building-text"),Ye=document.querySelector(".building-text-container");function Ls(){Ye.classList.add("building")}function ks(u){const s=Math.round(u*100);$s.textContent=`Building(${s}%)`}function Ds(){Ye.classList.remove("building")}async function Ts(){const u=await je(`model-${he.type}-${he.name}`,he.sourceURL),s=await je(`envMap-${be.type}-${be.name}`,be.sourceURL);await oe.loadData(u,s,Cs),document.body.classList.remove("loading"),oe.tracer.onBuildingBeginCallback=Ls,oe.tracer.onBuildingProgressCallback=ks,oe.tracer.onBuildingEndCallback=Ds,Xe(),oe.play(),setTimeout(()=>{document.documentElement.classList.add("alpha")},1e3)}M.mount("#app");Ts();
